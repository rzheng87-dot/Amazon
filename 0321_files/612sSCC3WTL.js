'use strict';mix_d("P13NSCCards__p13n-mobile-carousel:p13n-mobile-carousel__pwDOx3KE","exports tslib @c/remote-operations @c/scoped-dom @p/A @c/metrics @c/aui-carousel @c/dom @p/a-carousel-framework @c/logger @c/aui-untrusted-ajax @c/browser-operations @c/aui-utils @c/tracking @c/error-handling @c/aui-feature-detect @c/aui-bottom-sheet @p/jQuery @c/scoped-metrics".split(" "),function(xb,k,yb,zb,zc,F,Ac,Ab,Bc,Cc,Dc,Ga,Ha,Bb,Ec,Fc,Gc,Hc,Ic){function Z(a){return a&&"object"===typeof a&&"default"in a?
a:{"default":a}}function Cb(){Ha.onScreen(oa["default"].cardRoot)&&(Ia(Aa.inViewport),removeEventListener("scroll",Cb))}function Jc(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d=[];b.forEach(function(e){d=k.__spread(d,Array.from(a.getElementsByClassName(e)))});return k.__spread(new Set(d))}var ea=Z(yb),v=Z(zb),E=Z(zc),aa=Z(F),Kc=Z(Ac),oa=Z(Ab),Db=Z(Bc),J=Z(Cc),Ba=Z(Dc),Ja=Z(Ga),K=Z(Ha),Q=Z(Ec),Lc=Z(Fc),Ma=Z(Gc),Ca=Z(Hc),Da=Z(Ic),T=function(){function a(){this.sheetCreated=!1;
this.sheet=this.sheetHeadingContainer=this.sheetSecondaryContent=this.bottomSheetContent=this.renderedSheetContent=null}a.getInstance=function(){a.instance||(a.instance=new a);return a.instance};a.prototype.setSheetCreated=function(b){this.sheetCreated=b};a.prototype.setRenderedSheetContent=function(b){this.renderedSheetContent=b};a.prototype.setBottomSheetContent=function(b){this.bottomSheetContent=b};a.prototype.setSheetSecondaryContent=function(b){this.sheetSecondaryContent=b};a.prototype.setSheetHeadingContainer=
function(b){this.sheetHeadingContainer=b};a.prototype.setSheet=function(b){this.sheet=b};a.prototype.getSheetCreated=function(){return this.sheetCreated};a.prototype.getRenderedSheetContent=function(){return this.renderedSheetContent};a.prototype.getBottomSheetContent=function(){return this.bottomSheetContent};a.prototype.getSheetSecondaryContent=function(){return this.sheetSecondaryContent};a.prototype.getSheetHeadingContainer=function(){return this.sheetHeadingContainer};a.prototype.getSheet=function(){return this.sheet};
a.prototype.reset=function(){this.sheetCreated=!1;this.sheet=this.sheetHeadingContainer=this.bottomSheetContent=this.renderedSheetContent=null};return a}().getInstance(),Mc=function(a){var b=T.getRenderedSheetContent();if(b){var c=0,d=b.querySelectorAll(".a-box-inner");d.forEach(function(f){c<f.scrollHeight&&(c=f.scrollHeight)});d.forEach(function(f){f.style.height=c+"px"});d=b.querySelectorAll(".certifiedSection");for(var e=0;e<d.length;e++)d[e].style.bottom="0";E["default"].defer(function(){var f=
T.getSheetHeadingContainer();if(f){f=Ca["default"](f);var g=f.outerHeight()||0;f=f.hasClass("a-sheet-heading-container")?0:g;a.changeHeight(Math.ceil(b.offsetHeight+f+1))}})}},Eb=function(a,b,c,d){for(var e,f;a.firstChild;)a.removeChild(a.firstChild);var g=T.getSheetHeadingContainer();if(!g)throw Error("Sheet heading container not initialized");var h=g.querySelector(".cpf-bottom-sheet-heading-primary");g=g.querySelector(".cpf-bottom-sheet-heading-secondary");b?(a.appendChild(T.getSheetSecondaryContent()),
null===(e=a.querySelector(c))||void 0===e?void 0:e.classList.remove("aok-hidden"),h.classList.add("aok-hidden"),g.innerHTML=Ca["default"](d).html(),g.classList.remove("aok-hidden")):(a.appendChild(T.getBottomSheetContent()),null===(f=a.querySelector(c))||void 0===f?void 0:f.classList.add("aok-hidden"),g.classList.add("aok-hidden"),h.classList.remove("aok-hidden"));T.setRenderedSheetContent(a)},Nc=function(a,b){var c,d;if(!T.getSheetCreated()){var e=document.createElement("div"),f=b+"-empty-div";e.classList.add(f,
"aok-hidden");v["default"].cardRoot.appendChild(e);var g=Ma["default"].create(b,"."+f);T.setSheet(g);T.setSheetCreated(!0);g.render(function(n){var m=document.createElement("div");T.setSheetHeadingContainer(m);m.style.flexGrow="1";var q=Ca["default"]("#"+n.id).parent().siblings(".a-sheet-heading-container");0<(null===q||void 0===q?void 0:q.length)?q.prepend(Ca["default"](m)):Ca["default"]("#"+n.id).parent().prepend(Ca["default"](m))});g.on("afterShow",function(){Mc(g)})}b=null===(c=a.currentTarget)||
void 0===c?void 0:c.getAttribute("cpf-bottom-sheet-content-id");a=null===(d=a.currentTarget)||void 0===d?void 0:d.getAttribute("cpf-bottom-sheet-header-content-id");var h=v["default"].cardRoot.querySelector("#"+b),l=v["default"].cardRoot.querySelector("#"+a);d=T.getSheet();if(!d)throw Error("Sheet not initialized");d.render(function(n){var m,q;n.innerHTML=(null===h||void 0===h?void 0:h.outerHTML)||"";null===(m=n.querySelector(".cpf-bottom-sheet-content"))||void 0===m?void 0:m.classList.remove("aok-hidden");
if(m=n.querySelector(".a-carousel-viewport"))m.style.height="auto";if(m=T.getSheetHeadingContainer())m.innerHTML=(null===l||void 0===l?void 0:l.outerHTML)||"",null===(q=m.querySelector(".cpf-bottom-sheet-content-heading"))||void 0===q?void 0:q.classList.remove("aok-hidden");T.setRenderedSheetContent(n)});d.show()},Oc=function(a){var b,c,d=T.getSheet(),e=T.getRenderedSheetContent();if(!e||!d)throw Error("Sheet content not initialized");var f=e.querySelector(".cpf-bottom-sheet-content");T.setBottomSheetContent(f.cloneNode(!0));
var g="#"+(null===(b=a.currentTarget)||void 0===b?void 0:b.getAttribute("cpf-bottom-sheet-secondary-content-id")),h="#"+(null===(c=a.currentTarget)||void 0===c?void 0:c.getAttribute("cpf-bottom-sheet-secondary-heading-id"));T.setSheetSecondaryContent(e.querySelector(g));f.hasChildNodes()&&d.render(function(l){Eb(l,!0,g,h)})},Pc=function(a){var b=T.getSheet();if(!b)throw Error("Sheet not initialized");var c="#"+a.data.preloadDomId;b.render(function(d){Eb(d,!1,c,"")})},Qc=function(a){var b=Ja["default"].setup().define;
b("cpf-bottom-sheet-open","click",function(c){Nc(c,a)});b("cpf-bottom-sheet-secondary-open","click",function(c){Oc(c)});E["default"].declarative("cpf-bottom-sheet-secondary-back","click",function(c){Pc(c)})},X=function(a,b){a&&(b?K["default"].show(a):K["default"].hide(a))},I=function(a,b){void 0===b&&(b=1);a="Recommendations:UIF:"+a;void 0===b&&(b=1);F.count(a,(F.count(a)||0)+b);return a},Fb=function(a){try{return JSON.parse(a)}catch(b){}},ia=function(a,b){if(b){var c=a.map(function(d){return b.querySelector(d)}).filter(function(d){return null!==
d&&d instanceof HTMLElement});return c.length===a.length?c:null}return null},Rc=function(a){var b=/[A-Z0-9]{10}/;if(a.startsWith("amzn1")&&a.includes("asin")){if((a=a.match(b))&&1<=a.length)return a=a[0],10===a.length?a:""}else if(10==a.length&&(a=a.match(b))&&1<=a.length)return a=a[0],10===a.length?a:"";return""},Gb=function(a,b,c){void 0===b&&(b=function(){});void 0===c&&(c=function(){});return k.__awaiter(void 0,void 0,void 0,function(){return k.__generator(this,function(d){switch(d.label){case 0:return a.dataset.event?
[4,Sc(a.dataset.event,a,b,c)]:[3,2];case 1:return d.sent(),[3,5];case 2:return a.dataset.url?[4,Tc(a.dataset.url,b,c)]:[3,4];case 3:return d.sent(),[3,5];case 4:J["default"].log("Element is missing dataset.url or dataset.event attribute"),c(),d.label=5;case 5:return[2]}})})},Sc=function(a,b,c,d){return k.__awaiter(void 0,void 0,void 0,function(){var e,f,g,h,l,n;return k.__generator(this,function(m){switch(m.label){case 0:e=function(q){return k.__awaiter(void 0,void 0,void 0,function(){var u,p;return k.__generator(this,
function(x){switch(x.label){case 0:return u=function(z){z?c():(J["default"].log("Failed to call PPDS custom API"),d())},p=function(z){J["default"].log("Caught error when calling PPDS custom API: "+z.stack);d()},[4,q().then(u).catch(p)];case 1:return x.sent(),[2]}})})};f=function(q){return k.__awaiter(void 0,void 0,void 0,function(){var u;return k.__generator(this,function(p){switch(p.label){case 0:if(!b.dataset.asin)return[3,2];u={asin:b.dataset.asin};return[4,e(q.bind(null,u))];case 1:return p.sent(),
[3,3];case 2:J["default"].log("Element was missing required data: asin"),d(),p.label=3;case 3:return[2]}})})};g=a;switch(g){case "NOT_INTERESTED":return[3,1];case "DELETE_NOT_INTERESTED":return[3,5]}return[3,7];case 1:if(!b.dataset.asin)return[3,3];h={asin:b.dataset.asin,expirationTime:Uc(b.dataset.suppressiondays),reason:b.dataset.reason,strategyId:b.dataset.strategyId||b.dataset.strategyid,widgetGroupId:b.dataset.widgetGroupId||b.dataset.widgetgroupid};l=ea["default"].setup(["recordNotInterested"]);
return[4,e(l.recordNotInterested.bind(null,h))];case 2:return m.sent(),[3,4];case 3:J["default"].log("Element was missing required data: asin"),d(),m.label=4;case 4:return[3,8];case 5:return n=ea["default"].setup(["deleteNotInterested"]),[4,f(n.deleteNotInterested)];case 6:return m.sent(),[3,8];case 7:return J["default"].log("Invalid PPDS event type: "+a),d(),[3,8];case 8:return[2]}})})},Tc=function(a,b,c){return k.__awaiter(void 0,void 0,void 0,function(){return k.__generator(this,function(d){switch(d.label){case 0:return[4,
Ba["default"].post(a,{accepts:"text/html,*/*",contentType:"application/x-www-form-urlencoded"}).then(function(){b()}).catch(function(e){J["default"].log("Failed to call AJAX endpoint "+a+" with error: "+e.message,"ERROR");c()})];case 1:return d.sent(),[2]}})})},Uc=function(a){if(a&&(a=Number.parseInt(a,10),!(0>=a||(a=new Date(Date.now()+864E5*a),Number.isNaN(a.getTime())))))return a.toISOString()},Hb=function(a){a=null===a||void 0===a?void 0:a.event;a=null===a||void 0===a?void 0:a.touches;a=null===
a||void 0===a?void 0:a[0];return[null===a||void 0===a?void 0:a.screenX,null===a||void 0===a?void 0:a.screenY]},Ib=function(a,b){if(a){a=k.__read(a,1)[0];if(b){var c=ia([".a-changeover-inner strong"],a);if(c)k.__read(c,1)[0].textContent=b;else{I("MissingChangeoverText");J["default"].log("Could not find the changeover text element for message surfacing");return}}X(a,!0);a.style.display="inline"}else I("MissingChangeover"),J["default"].log("Could not find the changeover element for message surfacing")},
Ra=function(a,b,c){var d;if((a=ia([".p13n-uf-data-wrapper"],a))&&c){a=k.__read(a,1)[0];try{for(var e=k.__values(b),f=e.next();!f.done;f=e.next()){var g=f.value,h=c[g];h&&a.setAttribute("data-"+g,h)}}catch(n){var l={error:n}}finally{try{f&&!f.done&&(d=e.return)&&d.call(e)}finally{if(l)throw l.error;}}}else throw I("FailedToUpdateNotInterestedModifiers"),Error("error updating feedback element");},Vc=function(a){return k.__awaiter(void 0,void 0,void 0,function(){var b,c;return k.__generator(this,function(d){switch(d.label){case 0:if(!E["default"].capabilities.isAmazonApp)return[3,
1];try{P.when("mash").execute(function(e){if(!a.retailDomain||0===a.retailDomain.length)throw Error("error sharing item: retail domain is not defined");var f=k.__read,g="https://"+a.retailDomain+a.url,h=a.title+" "+g,l="https://"+a.retailDomain+"/dp/"+a.asin,n=140>=h.length?h:g;n=140>=n.length?n:l;g=160>=h.length?h:g;g=160>=g.length?g:l;f=f.call(k,[h,n,g],3);h=f[0];e.share({messagePlain160:f[2],messagePlain140:f[1],messageHTML:"<p>"+h+"</p>",messagePlain:h,subject:a.title,url:a.url})})}catch(e){b=
e;if("AbortError"===b.name||"Share canceled"===b.message)return I("AbortShareMission"),[2];throw Error("error sharing with mash");}return[3,5];case 1:if("function"!==typeof navigator.share)return[3,5];d.label=2;case 2:return d.trys.push([2,4,,5]),[4,navigator.share({text:a.message,title:a.title,url:a.url})];case 3:return d.sent(),[3,5];case 4:b=c=d.sent();if("AbortError"===b.name||"Share canceled"===b.message)return I("AbortShareMission"),[2];throw Error("error sharing with navigator");case 5:return[2]}})})},
Jb=function(a){return a?(a.forEach(function(b){b.onclick=function(c){c.preventDefault()}}),!0):!1},Kb=function(a){a.setAttribute("draggable","false");a.style.userSelect="none";"webkitUserSelect"in a.style&&(a.style.webkitUserSelect="none");"webkitUserDrag"in a.style&&(a.style.webkitUserDrag="none");"webkitTouchCallout"in a.style&&(a.style.webkitTouchCallout="none");a.addEventListener("contextmenu",function(b){return b.preventDefault()})},pa=function(a,b){return Lb(b).includes(a)},Lb=function(a){var b;
return null!==(b=Fb(a.getAttribute("data-uif-old-sheets")))&&void 0!==b?b:[]},fa;(function(a){a.closeBottomSheet="closeBottomSheet";a.disableLongPressOnMovement="disableLongPressOnMovement";a.lessLikeThis="lessLikeThis";a.longPressEnd="longPressEnd";a.longPressStart="longPressStart";a.moreLikeThis="moreLikeThis";a.openBottomSheet="openBottomSheet";a.recordFeedback="recordFeedback";a.removeFromList="removeFromList";a.saveToList="saveToList";a.shareItem="shareItem";a.storeFeedbackInformation="storeFeedbackInformation";
a.undoRecordFeedback="undoRecordFeedback"})(fa||(fa={}));var Mb;(function(a){a.DEVO="devo";a.GAMMA="gamma";a.PROD="prod"})(Mb||(Mb={}));var Wc={ATVPDKIKX0DER:"www.amazon.com",A1F83G8C2ARO7P:"www.amazon.co.uk",A1PA6795UKMFR9:"www.amazon.de",A13V1IB3VIYZZH:"www.amazon.fr",A1RKKUPIHCS9HS:"www.amazon.es",A1VC38T7YXB528:"www.amazon.co.jp",A2EUQ1WTGCTBG2:"www.amazon.ca",APJ6JRA9NG5V4:"www.amazon.it",AAHKV2X7AFYLW:"www.amazon.cn",A2Q3Y263D00KWC:"www.amazon.com.br",A21TJRUUN4KGV:"www.amazon.in",A1AM78C64UM0Y8:"www.amazon.com.mx",
A39IBJ37TRP1C6:"www.amazon.com.au",AD2EMQ3L3PG8S:"www.amazon.ru",A1805IZSGTT6HS:"www.amazon.nl",A17E79C6D8DWNP:"www.amazon.sa",A2VIGQ35RCS4UG:"www.amazon.ae",A19VAU5U5O7RUS:"www.amazon.sg",A33AVAJ2PDY3EV:"www.amazon.com.tr",ARBP9OOSHTCHU:"www.amazon.eg",A2NODRKZP88ZB9:"www.amazon.se",A1C3SOZRARQ6R3:"www.amazon.pl",AMEN7PMS3EDWL:"www.amazon.com.be",AE08WJ6YKNBMC:"www.amazon.co.za",A3OCL2LJ6GDH9T:"www.amazon.com.ng",A2WDZJZ5TCRMLH:"www.amazon.cl",A1ZXRLSQW2V54D:"www.amazon.com.co",A28R8C7NBKEWEA:"www.amazon.ie"},
Xc=function(a){a=Wc[a];if(("string"!==typeof a||a.trim())&&"undefined"!==typeof a&&null!==a)return a},Yc=function(a){var b,c;return null!==(c=null===(b=null===a||void 0===a?void 0:a.dataset)||void 0===b?void 0:b.activeTreatment)&&void 0!==c?c:"C"},Zc={asin:"",event:"",strategyid:"",widgetgroupid:"",suppresiondays:""},Nb="asin event strategyId widgetGroupId suppressiondays reason".split(" "),$c=["title","url"],hd={universalFeedbackBottomSheetInit:function(a,b,c){function d(r,t,w){return r.some(function(B){return!B||
""===B.innerHTML.trim()})?(I(t),ja(Error(w)),!1):!0}var e,f,g,h,l,n,m,q,u;void 0===a&&(a=function(){});void 0===b&&(b=1);var p,x,z,R,L,U,qa={},G=function(r,t){void 0===t&&(t=1);I(r,t);qa[r]||(I(r+"Unique",t),qa[r]=!0)},M=!(null===(f=null===(e=v["default"].cardRoot)||void 0===e?void 0:e.dataset)||void 0===f||!f.disableUif),S=[],y=v["default"].cardRoot.querySelector(".p13n-uf-wrapper");if(y&&(c=y.dataset.input)){var V=JSON.parse(c),N="p13n-uf-bottom-sheet_"+y.dataset.uniqueId;v["default"].cardRoot.setAttribute("data-uif-current-sheet-name",
N);var Y=Lb(v["default"].cardRoot);c=null!==(m=null!==(h=null===(g=y.dataset)||void 0===g?void 0:g.marketplaceId)&&void 0!==h?h:null===(n=null===(l=V.content)||void 0===l?void 0:l.metadataMap)||void 0===n?void 0:n.marketplaceId)&&void 0!==m?m:"";var ba=null!==(q=Xc(c))&&void 0!==q?q:"";null!==(u=Yc(y))&&void 0!==u?u:"C";var C=Ma["default"].create(N,".p13n-uf-bottom-sheet-content",{height:352}),xa=function(r){return ea["default"].setup(["getUniversalFeedbackBottomSheetContent"]).getUniversalFeedbackBottomSheetContent(r)},
Sa=function(r){return ea["default"].setup(["getUniversalFeedbackItem"]).getUniversalFeedbackItem(r)},ad=function(r){return ea["default"].setup(["getUniversalFeedbackReasons"]).getUniversalFeedbackReasons(r)},bd=function(r){return ea["default"].setup(["getUniversalFeedbackActions"]).getUniversalFeedbackActions(r)},cd=function(r){return ea["default"].setup(["refreshCard"]).refreshCard(r)},dd=function(r){return k.__awaiter(void 0,void 0,void 0,function(){var t;return k.__generator(this,function(w){t=
ea["default"].setup(["logServerSideMetric"]);return[2,t.logServerSideMetric(r)]})})};g=Ga.setup().define;g(fa.longPressStart,"touchstart",function(r){if(!pa(N,v["default"].cardRoot)){var t=k.__read(Hb(r),2);var w=t[0];t=t[1];w&&t&&(w=k.__read([w,t],2),z=w[0],R=w[1]);x=Date.now();p=requestAnimationFrame(function(){return Ob(r)})}});g(fa.longPressEnd,"touchend",function(){pa(N,v["default"].cardRoot)||(p&&(cancelAnimationFrame(p),p=0),x=0)});g(fa.disableLongPressOnMovement,"touchmove",function(r){if(!pa(N,
v["default"].cardRoot)){var t=k.__read(Hb(r),2);r=t[0];t=t[1];p&&r&&t&&z&&R&&(15<Math.abs(t-R)||15<Math.abs(r-z))&&(cancelAnimationFrame(p),p=0);x=0}});g(fa.recordFeedback,"click",function(){return k.__awaiter(void 0,void 0,void 0,function(){return k.__generator(this,function(r){switch(r.label){case 0:return pa(N,v["default"].cardRoot)?[2]:[4,C.render(function(t){return k.__awaiter(void 0,void 0,void 0,function(){var w,B,A,D;return k.__generator(this,function(O){try{if(w=[".p13n-uf-data-wrapper"],
B=ia(w,t))A=k.__read(B,1),D=A[0],Gb(D),I("RecordedFeedback"),S.push(D.dataset.asin);else throw I("FailedToRecordFeedback"),Error("error recording feedback");}catch(H){ja(H)}return[2]})})})];case 1:return r.sent(),[2]}})})});g(fa.undoRecordFeedback,"click",function(){return k.__awaiter(void 0,void 0,void 0,function(){return k.__generator(this,function(r){switch(r.label){case 0:return pa(N,v["default"].cardRoot)?[2]:[4,C.render(function(t){return k.__awaiter(void 0,void 0,void 0,function(){var w,B,
A,D,O,H,da,ka,ma,na,ra;return k.__generator(this,function(ya){try{if(w=".p13n-uf-bottom-sheet-reasons .p13n-uf-botton-sheet-actions .p13n-uf-record-feedback .p13n-uf-data-wrapper .p13n-uf-thank-you .p13n-uf-undo-record-feedback".split(" "),B=ia(w,t))A=k.__read(B,6),D=A[0],O=A[1],H=A[2],da=A[3],ka=A[4],ma=A[5],na=k.__assign(k.__assign({},Zc),{event:"NOT_INTERESTED"}),Ra(t,Nb,na),da.setAttribute("data-event","DELETE_NOT_INTERESTED"),Gb(da),G("DeleteRecordedFeedback"),ra=S.findIndex(function(la){return la===
da.dataset.asin}),S.splice(ra,1),C.changeHeight(352),X(O,!0),X(H,!1),X(D,!1),X(ma,!1),X(ka,!1);else throw I("FailedToDeleteFeedback"),Error("error deleting feedback");}catch(la){ja(la)}return[2]})})})];case 1:return r.sent(),[2]}})})});g(fa.storeFeedbackInformation,"click",function(r){return k.__awaiter(void 0,void 0,void 0,function(){return k.__generator(this,function(t){switch(t.label){case 0:return pa(N,v["default"].cardRoot)?[2]:[4,C.render(function(w){return k.__awaiter(void 0,void 0,void 0,
function(){var B,A;return k.__generator(this,function(D){try{B=null===(A=r.target)||void 0===A?void 0:A.dataset,Ra(w,Nb,B),I("ReasonSelected"),I("ReasonSelected:"+B.reason)}catch(O){I("FailedToStoreFeedbackInformation"),ja(O)}return[2]})})})];case 1:return t.sent(),[2]}})})});g(fa.lessLikeThis,"click",function(){return k.__awaiter(void 0,void 0,void 0,function(){return k.__generator(this,function(r){switch(r.label){case 0:return pa(N,v["default"].cardRoot)?[2]:[4,C.render(function(t){return k.__awaiter(void 0,
void 0,void 0,function(){var w,B,A,D,O,H,da,ka;return k.__generator(this,function(ma){try{if(w=[".p13n-uf-bottom-sheet-reasons",".p13n-uf-botton-sheet-actions",".p13n-uf-record-feedback",".p13n-uf-thank-you",".p13n-uf-undo-record-feedback"],C.changeHeight(466),B=ia(w,t))A=k.__read(B,5),D=A[0],O=A[1],H=A[2],da=A[3],ka=A[4],X(O,!1),X(D,!0),X(H,!0),X(da,!0),X(ka,!0),G("LessLikeThis");else throw I("FailedToRenderLessLikeThis"),Error("required elements to render not interested reasons not present");}catch(na){ja(na)}return[2]})})})];
case 1:return r.sent(),[2]}})})});g(fa.shareItem,"click",function(){return k.__awaiter(void 0,void 0,void 0,function(){return k.__generator(this,function(r){switch(r.label){case 0:return[4,C.render(function(t){return k.__awaiter(void 0,void 0,void 0,function(){var w,B,A,D,O,H,da,ka,ma,na,ra,ya,la,ua;return k.__generator(this,function(sa){switch(sa.label){case 0:sa.trys.push([0,5,,7]);w=ia([".p13n-uf-action-option-SHARE"],t);B=null!==(ya=null===(ra=null===(na=null===(ma=w[0])||void 0===ma?void 0:ma.firstChild)||
void 0===na?void 0:na.firstChild)||void 0===ra?void 0:ra.dataset.translateditemstring)&&void 0!==ya?ya:"";A=[".p13n-uf-data-wrapper"];D=ia(A,t);if(!D)return[3,3];O=k.__read(D,1);H=O[0];da=(null===(la=H.attributes[1])||void 0===la?void 0:la.nodeValue)||"";ka=(null===(ua=H.attributes[2])||void 0===ua?void 0:ua.nodeValue)||"";if(/^(?:https?:\/\/)?(?:localhost|(?:[\w-]{1,63}\.){1,3}[\w-]{1,63})(?::\d{1,5})?(?:\/[\w-.,@?^=%&:/~+#]*)?$/i.test(ka))throw Error("error sharing item: invalid URL format");if(!U)throw Error("error sharing item: no available asin");
return[4,Vc({title:da,message:B,url:ka,asin:U,retailDomain:ba})];case 1:return sa.sent(),G("Share"),[4,C.hide()];case 2:return sa.sent(),[3,4];case 3:throw Error("error sharing item: unable to find elements");case 4:return[3,7];case 5:return sa.sent(),[4,C.hide()];case 6:return sa.sent(),[3,7];case 7:return[2]}})})})];case 1:return r.sent(),[2]}})})});var Pb=function(r,t){return k.__awaiter(void 0,void 0,void 0,function(){var w,B,A,D,O;return k.__generator(this,function(H){switch(H.label){case 0:H.trys.push([0,
4,,5]);w='span[id="'+r+'"] input';B=ia([w],t);if(!(0<B.length))return[3,3];A="SAVE_TO_LIST"===r?"HEART":"UN_HEART";H={asin:B[0].dataset.asin,type:A};return[4,ea["default"].setup(["updateList"]).updateList(H)];case 1:return D=H.sent(),O=ia([".p13n-canaries-bottom-sheet-list-action-message"],v["default"].cardRoot),[4,C.hide()];case 2:H.sent(),Ib(O,D.message),H.label=3;case 3:return[3,5];case 4:return H.sent(),I("FailedToUpdateList"),[3,5];case 5:return[2]}})})};g(fa.saveToList,"click",function(){return k.__awaiter(void 0,
void 0,void 0,function(){return k.__generator(this,function(r){switch(r.label){case 0:return G("SaveToListClick"),[4,C.render(function(t){return k.__awaiter(void 0,void 0,void 0,function(){return k.__generator(this,function(w){switch(w.label){case 0:return[4,Pb("SAVE_TO_LIST",t)];case 1:return w.sent(),[2]}})})})];case 1:return r.sent(),[2]}})})});g(fa.removeFromList,"click",function(){return k.__awaiter(void 0,void 0,void 0,function(){return k.__generator(this,function(r){switch(r.label){case 0:return G("RemoveFromListClick"),
[4,C.render(function(t){return k.__awaiter(void 0,void 0,void 0,function(){return k.__generator(this,function(w){switch(w.label){case 0:return[4,Pb("REMOVE_FROM_LIST",t)];case 1:return w.sent(),[2]}})})})];case 1:return r.sent(),[2]}})})});g(fa.openBottomSheet,"click",function(){return k.__awaiter(void 0,void 0,void 0,function(){var r;return k.__generator(this,function(t){switch(t.label){case 0:return pa(N,v["default"].cardRoot)?[2]:[4,C.show()];case 1:return t.sent(),r=document.body.querySelector(".a-sheet-close"),
r.focus(),[2]}})})});g(fa.closeBottomSheet,"click",function(){return k.__awaiter(void 0,void 0,void 0,function(){return k.__generator(this,function(r){switch(r.label){case 0:return pa(N,v["default"].cardRoot)?[2]:[4,C.hide()];case 1:return r.sent(),[2]}})})});var Qb=function(r){r=Array.prototype.slice.call(r.querySelectorAll(".p13n-uf-wrapper"));null===r||void 0===r?void 0:r.forEach(function(t){Kb(t);Array.prototype.slice.call(t.querySelectorAll("a,img,div,button,input")).forEach(function(w){Kb(w)})})},
Ta=v["default"].cardRoot.querySelector(".p13n-uf-bottom-sheet-link");if(Ta)if(Jb([Ta]),Qb(v["default"].cardRoot),g=new MutationObserver(function(){Qb(v["default"].cardRoot)}),h=document.body.querySelector(".p13n-uf-wrapper")){g.observe(h,{childList:!0,subtree:!0});var Ob=function(r){return k.__awaiter(void 0,void 0,void 0,function(){var t;return k.__generator(this,function(w){switch(w.label){case 0:return w.trys.push([0,4,,5]),x&&550<=Date.now()-x&&!M?[4,dd({name:"LongPressTriggered",value:1,unit:"Count"})]:
[3,2];case 1:return w.sent(),L=r.currentTarget,G("LongPressTriggered"),Ta.click(),[3,3];case 2:p=requestAnimationFrame(function(){return Ob(r)}),w.label=3;case 3:return[3,5];case 4:return t=w.sent(),I("FailedToOpenBottomSheet"),ja(t),[3,5];case 5:return[2]}})})},$b=function(){return k.__awaiter(void 0,void 0,void 0,function(){var r,t,w,B,A,D,O,H,da,ka,ma,na,ra,ya,la,ua,sa,Rb,Sb,Ua,Va,Wa,Xa,Ya,Za,$a,ab,bb,cb;return k.__generator(this,function(ha){switch(ha.label){case 0:return ha.trys.push([0,3,,4]),
[4,xa({removeItemsPromptString:y.dataset.removeItemText||"",errorLoadingItemsString:y.dataset.errorLoadingText||"",notInterestedString:y.dataset.notInterestedText||""})];case 1:return r=ha.sent(),[4,C.render(function(ta){return k.__awaiter(void 0,void 0,void 0,function(){return k.__generator(this,function(db){ta.innerHTML="";if(!d([r],"MissingBottomSheetContent","bottom sheet content is null or empty"))return[2];ta.appendChild(r);return[2]})})})];case 2:return ha.sent(),[3,4];case 3:return w=ha.sent(),
I("FailedToFetchContent"),ja(w),[2];case 4:B=Fb(y.dataset.asinList);A=null===(Ua=null===L||void 0===L?void 0:L.dataset)||void 0===Ua?void 0:Ua.p13nUfAsin;if(!A)return I("MissingTargetAsin"),ja(Error("target asin is undefined or missing")),[2];U=Rc(A);D=null!==(Va=null===B||void 0===B?void 0:B.find(function(ta){return ta.id===U}))&&void 0!==Va?Va:null;if(!D)return I("MissingWidgetAsin"),ja(Error("target asin is missing from the widget")),[2];O={id:[D],reftagprefix:null!==(Wa=y.dataset.reftag)&&void 0!==
Wa?Wa:"",linkparameters:null!==(Xa=y.dataset.linkParameters)&&void 0!==Xa?Xa:""};H={asin:D,strategyId:null!==(Ya=y.dataset.strategyId)&&void 0!==Ya?Ya:"",widgetGroupId:null!==(Za=y.dataset.widgetGroupId)&&void 0!==Za?Za:""};ha.label=5;case 5:return ha.trys.push([5,8,,9]),[4,Sa(O)];case 6:da=ha.sent();if(!d([da],"FailedToFetchContent","faceout content is null or empty"))return[2];ka={asin:D,strategyId:null!==($a=y.dataset.strategyId)&&void 0!==$a?$a:"",widgetGroupId:null!==(ab=y.dataset.widgetGroupId)&&
void 0!==ab?ab:"",listActionType:null!==(cb=null===(bb=da.dataset)||void 0===bb?void 0:bb.list)&&void 0!==cb?cb:"",url:ba?"https://"+ba:""};return[4,Promise.all([ad(H),bd(ka)])];case 7:return ma=k.__read.apply(void 0,[ha.sent(),2]),na=ma[0],ra=ma[1],t=[da,na,ra],[3,9];case 8:return ya=ha.sent(),I("FailedToFetchContent"),ja(ya),[2];case 9:ha.trys.push([9,11,,12]);if(!d(t,"FailedToFetchContent","bottom sheet content is null or empty"))return[2];la=k.__read(t,3);ua=la[0];sa=la[1];Rb=la[2];return[4,C.render(function(ta){return k.__awaiter(void 0,
void 0,void 0,function(){var db,Tb,Ea,eb,fb,Ub,Vb,Na,Wb,Xb,Yb,Zb,gb,hb;return k.__generator(this,function(De){try{if(db=[".p13n-uf-bottom-sheet-faceout",".p13n-uf-bottom-sheet-reasons",".p13n-uf-bottom-sheet",".p13n-uf-bottom-sheet-loading-items",".p13n-uf-botton-sheet-actions"],Tb=ia(db,ta))if(Ea=k.__read(Tb,5),eb=Ea[0],fb=Ea[1],Ub=Ea[2],Vb=Ea[3],Na=Ea[4],eb.innerHTML="",fb.innerHTML="",Na.innerHTML="",eb.appendChild(ua),fb.appendChild(sa),Na.appendChild(Rb),Wb=Array.prototype.slice.call(ta.querySelectorAll(".p13n-uf-action-options")),
0<Wb.length&&(X(Ub,!0),X(Na,!0),X(Vb,!1)),Xb={title:null===(gb=ua.dataset)||void 0===gb?void 0:gb.title,url:null===(hb=ua.dataset)||void 0===hb?void 0:hb.url},Ra(ta,$c,Xb),Yb=[".p13n-uf-record-feedback"],Zb=ia(Yb,ta))Jb(Zb);else throw I("MissingRecordFeedback"),Error("could not find record feedback button");else I("AbortLongPress")}catch(ed){ja(ed)}return[2]})})})];case 10:return ha.sent(),[3,12];case 11:return Sb=ha.sent(),ja(Sb),[3,12];case 12:return[2]}})})},ja=function(r){return k.__awaiter(void 0,
void 0,void 0,function(){return k.__generator(this,function(t){switch(t.label){case 0:return[4,C.render(function(w){return k.__awaiter(void 0,void 0,void 0,function(){var B,A,D;return k.__generator(this,function(O){B=w.querySelector(".p13n-uf-bottom-sheet");A=w.querySelector(".p13n-uf-bottom-sheet-loading-items");D=w.querySelector(".p13n-uf-bottom-sheet-error-loading-items");C.changeHeight(352);X(B,!1);X(A,!1);X(D,!0);return[2]})})})];case 1:return t.sent(),J["default"].log(r),[2]}})})},ac=function(){var r;
if(0<S.length&&V&&V.content){var t=V.content.recommendations,w=[];try{for(var B=k.__values(t),A=B.next();!A.done;A=B.next()){var D=A.value;0>S.indexOf(D.id)&&w.push(D)}}catch(H){var O={error:H}}finally{try{A&&!A.done&&(r=B.return)&&r.call(B)}finally{if(O)throw O.error;}}fd(w,w.length<b)}},fd=function(r,t){void 0===t&&(t=!1);t||(V.content.recommendations=r);cd(V).then(function(w){C.off("beforeHide",ac);C.off("beforeShow",$b);C.render(function(B){return k.__awaiter(void 0,void 0,void 0,function(){return k.__generator(this,
function(A){B.innerHTML="";return[2]})})});gd(w,t)}).catch(function(w){J["default"].log("Error fetching items: "+w)})},gd=function(r,t){void 0===t&&(t=!1);t&&v["default"].cardRoot.setAttribute("data-disable-uif","true");v["default"].cardRoot.innerHTML=r.innerHTML;v["default"].cardRoot.setAttribute("data-uif-old-sheets",JSON.stringify(k.__spread(Y,[N])));a();t&&(r=ia([".p13n-uf-bottom-sheet-not-enough-items-message"],v["default"].cardRoot),Ib(r))};C.on("beforeShow",$b);C.on("beforeHide",ac);C.on("afterHide",
function(){C.render(function(r){return k.__awaiter(void 0,void 0,void 0,function(){return k.__generator(this,function(t){r.innerHTML="";return[2]})})})})}else I("MissingDataElement")}}},bc={},ib=function(a,b,c){void 0===b&&(b="");void 0===c&&(c=1);b=a+b;bc.hasOwnProperty(b)||(bc[b]=!0,F.count(a,(F.count(a)||0)+c))},id=function(a){ib(E["default"].capabilities.mobile?"Card:EERU:SharedLib:mobile:render":"Card:EERU:SharedLib:desktop:render");var b=function(d,e){d={$event:{preventDefault:E["default"].$.noop,
stopPropagation:E["default"].$.noop},$target:d.getContent().find('[data-a-tab-name="'+e+'"]'),data:{name:"energyEfficiencyTabSet"}};E["default"].trigger("a:declarative:a-tabs:click",d)},c=function(d,e){var f=d&&d.$event,g=d&&d.data||{},h=g.activeTabName,l=g.modalHeight,n=g.name;f&&f.preventDefault&&f.preventDefault();f&&f.stopPropagation&&f.stopPropagation();f=e.get(n);f||(E["default"].on("a:popover:beforeShow:"+n,function(m){m.popover&&m.popover.getContent&&(m=m.popover.getContent(),m.find(".a-manually-loaded").parent().css("min-height",
l),E["default"].loadDescendantImagesManually(m))}),f=e.create(d.$target,g));f.show();b(f,h)};a.when("a-secondary-view").execute("RegisterEnergyEfficiencyEventMobile",function(d){E["default"].declarative("card-energy-efficiency-secondary-view","click",function(e){ib("Card:EERU:SharedLib:mobile:click",e&&e.data&&e.data.name||"");c(e,d)})});a.when("a-modal").execute("RegisterEnergyEfficiencyEventDesktop",function(d){E["default"].declarative("card-energy-efficiency-modal","click",function(e){ib("Card:EERU:SharedLib:desktop:click",
e&&e.data&&e.data.name||"");c(e,d)})})},jd=function(a){a.when("ready").execute("EEBadgeProductFicheResize",function(b){var c=E["default"].$;c(".energyEfficiencyContainer").each(function(d,e){d=c(e).find(".energyEfficiencyProductFicheLabel").first();e=c(e).find("svg").first();d.parent().outerHeight()>e.outerHeight()&&(d.removeClass("a-size-small"),d.addClass("a-size-micro"),d.parent().outerHeight()>e.outerHeight()&&d.parent().css("line-height","10px"))})})},kd=function(){var a=window.P;id(a);jd(a)},
ld={ctiList:["Website/Personalization/Report a Problem CX"],category:"Website",type:"Personalization",item:"Report a Problem CX",folder:"9c9c97c9-6f69-4dba-a55d-26045c6a3068",group:"P13N Report a Problem CX"},md=[{ctiList:["Website/Personalization/Similarities","Website/Detail Page/Similarities"],category:"Website",type:"Personalization",item:"Similarities",folder:"4d16d05d-9a17-4b36-b8fe-9ee159ff81de",group:"Similarities"}],qd=function(a){var b=v["default"].cardRoot.querySelector(".p13n-report-flag"),
c=Ja["default"].setup();c.define("showFlag","mouseover",function(){b.classList.remove("p13n-report-flag-hide")});c.define("hideFlag","mouseout",function(){b.classList.add("p13n-report-flag-hide")});c.attach("showFlag",a);c.attach("hideFlag",a);var d=v["default"].cardRoot.querySelector(".internal-flag-form"),e=d.querySelector(".internal-flag-env-data").dataset,f=d.querySelector(".internal-flag-title-text"),g=d.querySelector(".internal-flag-description").firstElementChild,h=d.querySelector(".internal-flag-alias"),
l=d.querySelector(".internal-flag-response-message"),n=function(m){m.preventDefault();m=function(x){return!x||!x.trim()};if(m(f.value)||m(g.value)||m(h.value))return jb(l,!1,"Something went wrong. One of the required fields was missing."),!1;m=v["default"].cardRoot.querySelectorAll(".a-dynamic-image");var q;if(q=v["default"].cardRoot.querySelector(".a-carousel-heading")){var u=nd(a,m.length);q="Internal user reported issue '"+f.value+"' with widget: "+q.innerText}else u=od(a),q="Internal user reported issue '"+
f.value+"'";m=pd(m,u,g.value,h.value,e);var p=ld;md.forEach(function(x){x.ctiList.includes(e.cti)&&(p=x)});Ba["default"].post("https://p13ngoals.corp.amazon.com/sims",{accepts:"text/html, application/json",contentType:"application/json;charset=UTF-8"},{sim_params:{assigned_folder:p.folder,description:m,descriptionContentType:"text/amz-markdown-sim",extensions:{tt:{assignedGroup:p.group,category:p.category,impact:5,item:p.item,type:p.type}},tags:[{id:"internal-problem-generated"}],title:q}}).then(function(x){jb(l,
!0,x)}).catch(function(x){jb(l,!1,x)});return!1};d.onsubmit=function(m){return n(m)};c=v["default"].cardRoot.querySelector(".p13n-desktop-report-problem-flag-data");if(c.dataset.name)E["default"].on("a:popover:hide:"+c.dataset.name,function(){d.reset();l.innerText=""})},nd=function(a,b){if(!a.dataset.aCarouselOptions)return J["default"].log("Empty ASIN List in carouselElement.dataset.aCarouselOptions","ERROR"),[];a=JSON.parse(a.dataset.aCarouselOptions).ajax.id_list;var c=v["default"].cardRoot.querySelector(".a-carousel-firstvisibleitem");
c=(Number(c.value)||1)-1;return a.map(function(d){return JSON.parse(d).id}).slice(c,c+b)},od=function(a){return(a=a.dataset.asinList)?a.split(","):[]},pd=function(a,b,c,d,e){for(var f="",g=0;g<a.length;g++){var h=a[g];f+=(h?"![]("+h.src+")":"IMAGE MISSING")+"\nASIN: "+(b[g]?b[g]:"ASIN MISSING")+"\n\n"}return"**This SIM-T ticket is created by the 'Report a Problem' internal tool. To know more, here's its wiki: https://w.amazon.com/bin/view/Personalization/CoreRecommendations/Projects/Canaries/Report-a-Problem-UX-on-P13NWidget/UserGuide/**\n\n**Alias:** ["+
(d+"](https://phonetool.amazon.com/users/"+d+")\n**Comment:** "+c+"\n\n**Widget Group ID:** "+e.widgetGroupId+"\n**Strategy ID:** "+e.strategyId+"\n**CTI:** "+e.cti+"\n**Facets:** ")+(e.facets+"\n**Content Reftag:** "+e.reftag+"\n"+(""!==e.baseAsin?"**Page ASIN:** "+e.baseAsin+"\n":"")+"\n**SessionID:** ")+(e.sessionId+"\n**MarketplaceID:** "+e.marketplaceId+"\n**Device Type:** "+e.deviceType+"\n\n**List of ASINs:**\n\n")+f},jb=function(a,b,c){b?(a.classList.remove("a-color-error"),c.responseBody&&
"object"===typeof c.responseBody?c.responseBody.response&&c.responseBody.response.id?a.innerHTML="Success, here's the <a href=\"https://t.corp.amazon.com/"+c.responseBody.response.id+'" target="_blank">SIM-T ticket</a> you created.':(J["default"].log("Fail to find the id of the SIM-T ticket created in the response body of response data.","ERROR"),a.innerText="Success, but we could not find the link to the SIM-T ticket."):(J["default"].log("The response body of response data is not an object.","ERROR"),
a.innerText="Success, but we could not find the link to the SIM-T ticket.")):(a.classList.add("a-color-error"),a.innerText="string"===typeof c?c:"Oops! Something went wrong. Please try again.")},rd={setupModal:function(a){return k.__awaiter(void 0,void 0,void 0,function(){var b;return k.__generator(this,function(c){b=v["default"].cardRoot.querySelector(".p13n-report-problem-modal-root");if(!b)return[2];qd(a);return[2]})})}},sd=ea["default"].setup(["getLazyLoadDeliveryMessage"]),td=function(a){return k.__awaiter(void 0,
void 0,void 0,function(){var b,c,d;return k.__generator(this,function(e){switch(e.label){case 0:b=a.querySelectorAll("[data-udm-asin]:not([data-requested=true])");if(!b.length)return[2,void 0];c=[];b.forEach(function(f){var g=f.dataset.udmAsin,h=f.dataset.udmMerchantId,l=f.dataset.udmBlockSize,n=f.dataset.udmLayoutSize,m="true"===f.dataset.udmBadgeWithoutProgramName;g&&h&&l&&(c.push({asin:g,merchantId:h,blockSize:l,layoutSize:n,badgeWithoutProgramName:m}),f.dataset.requested="true")});return c.length?
[4,sd.getLazyLoadDeliveryMessage({lazyLoadDeliveryMessageViewModels:c})]:[2,void 0];case 1:return d=e.sent(),[2,[].slice.call(d.querySelectorAll("[data-udm-asin]:not([data-requested=true])"))]}})})},ud=function(a){return k.__awaiter(void 0,void 0,void 0,function(){var b;return k.__generator(this,function(c){switch(c.label){case 0:return[4,td(a)];case 1:b=c.sent();if(!b)return[2];b.map(function(d){var e=d.dataset.udmAsin,f=d.dataset.udmMerchantId;e&&f&&(e=a.querySelector('[data-udm-asin="'+e+'"][data-udm-merchant-id='+
f+"]"))&&(e.outerHTML=d.innerHTML)});return[2]}})})},cc=[],vd=function(a){var b=Array.prototype.slice.call(a.querySelectorAll("[data-metrics]"));b.push(a);b.forEach(function(c){if(c&&c.dataset&&c.dataset.metrics&&(!c.id||!cc.includes(c.id))){var d=JSON.parse(c.dataset.metrics),e;for(e in d)d.hasOwnProperty(e)&&F.count(e,d[e]);c.removeAttribute("data-metrics");c.id&&cc.push(c.id)}})},dc=/(?=[ \-\/])|(?=[\u3105-\u312F])|(?=[\u31A0-\u31BA])|(?=[\u4E00-\u9FD5])|(?=[\u3400-\u4DB5])|(?=[\uF900-\uFAFF])|(?=[\u3040-\u309F])|(?=[\u30A0-\u30FF])|(?=[\u3190-\u319F])/,
ec=/[^\/\-\[\]():\s]/,wd=function(a){var b=E["default"].$("<div>")[0];b.classList.add("p13n-sc-offscreen-truncate");var c=parseInt(a.getAttribute("data-rows")||"2",10),d=function(){var g=a.innerHTML;a.innerHTML="&hellip;";var h=a.clientHeight;a.innerHTML=g;return h}();if(c){if(d){var e=function(g){b.innerHTML=g;return Math.round(b.clientHeight/d)<=c},f=function(g,h){g=g.split(h);var l=Math.floor(a.clientWidth/12),n=function(q){b.classList.add("p13n-sc-offscreen-truncate");b.style.overflow="hidden";
b.textContent=q;a.appendChild(b);q=a.clientWidth>=a.scrollWidth;a.removeChild(b);return q},m=function(q){var u=q.length-l;q.trim().length>l&&!n(q)&&Array.prototype.slice.call(q).map(function(p,x){return x>l&&x<=u&&ec.test(p)?"&shy;"+p:p});return q};return g.map(function(q){return m(q)}).join("")};return{truncate:function(){var g=a.innerHTML.trim(),h=a.textContent||"";g=f(g,dc);a.appendChild(b);if(e(g))a.removeChild(b),a.innerHTML=g;else{var l=g.split(dc);for(var n=1,m=l.length,q,u,p=0;n!==m;)if(q=
Math.floor((m+n)/2),u=l.slice(0,q).join("")+"&hellip;",e(u)){if(1>=m-q){for(p=q;0<p&&!ec.test(l[p-1]);)p--;break}n=q}else m=q;l=0===p?void 0:l.slice(0,p).join("")+"&hellip;";l?(a.innerHTML=l,a.setAttribute("title",h),a.setAttribute("aria-label",h)):(J["default"].log("Unable to successfully truncate line "+g,"ERROR"),a.removeChild(b))}}}}J["default"].log("Truncation element does not have a line height or it is zero","ERROR")}else J["default"].log("Truncation element missing necessary line number data",
"ERROR")},xd=function(a){var b=Array.prototype.slice.call(a.getElementsByClassName("p13n-sc-truncate"));a=a.getElementsByClassName("p13n-sc-truncate-fallback");(window.CSS&&CSS.supports&&CSS.supports("-webkit-line-clamp","1")?b:b.concat(Array.prototype.slice.call(a))).filter(function(c){return!!c.offsetParent}).map(function(c){var d=wd(c);d&&(d.truncate(),c.classList.add("p13n-sc-truncated"),c.classList.remove("p13n-sc-truncate"),c.classList.remove("p13n-sc-truncate-fallback"),c.className=c.className.replace(/p13n-sc-line-clamp-\d/g,
""))})},yd=function(a){a.querySelectorAll(".a-carousel-viewport").forEach(function(b){b=b.querySelectorAll(".a-carousel-card");for(var c=null,d=0;d<b.length;d++){var e=b[d].getAttribute("aria-roledescription");if(null!==e&&""!==e){c=e;break}}c=c||"slide";b.forEach(function(f){f.getAttribute("aria-roledescription")!==c&&f.setAttribute("aria-roledescription",c)})})},W=function(a){return a instanceof HTMLElement},zd=function(a){if(a)try{return parseInt(a,10)}catch(b){}},Ad=function(a){var b=a.getElementsByClassName("a-carousel-card"),
c=a.getElementsByClassName("p13n-sc-uncoverable-faceout"),d=Array.prototype.slice.call(c).map(function(f){var g=f.childElementCount;if(0<g){var h=f.getBoundingClientRect().top;g=f.children[g-1].getBoundingClientRect().bottom;return Math.max(g-h,f.clientHeight)}return f.clientHeight});d=Math.max.apply(Math,k.__spread(d));if(0<d){var e=d.toString()+"px";a.getElementsByClassName("a-carousel-viewport")[0].style.height=e;Array.prototype.slice.call(b).forEach(function(f){f.style.height=e});Array.prototype.slice.call(c).forEach(function(f){f.style.height=
"100%"})}},Bd=function(a){a=fc(a);a.matches("form")&&!a.classList.contains("add-to-cart-disabled-form")&&(a.addEventListener("submit",function(b){b.preventDefault()}),a.classList.add("add-to-cart-disabled-form"))},fc=function(a){a=a.querySelector(".add-to-cart-data");null==a&&Q["default"].error("Missing add to cart data element in target element","add-to-cart.client.data-handler","getDataElement");return a},Cd=function(){var a;try{P.now("A").execute(function(b){var c;if(b){var d=b.state("mbs-sp-csrf-state"),
e=null===(c=b.$(null===d||void 0===d?void 0:d.mbsSpCSRFToken))||void 0===c?void 0:c.filter("input");(null===e||void 0===e?0:e.length)?a=b.$(d.mbsSpCSRFToken).filter("input").val():(J["default"].log("Invalid page state!"),aa["default"].count("ATCLibInvalidPageState",1))}else J["default"].log("Module not loaded!"),aa["default"].count("ATCLibBrowserModuleNotFound",1)})}catch(b){J["default"].log("Error occured while fetch CSRF token from page state: "+b),aa["default"].count("ATCLibSPTokenParseFailure",
1)}return a},gc=function(a,b){var c=kb(a);K["default"].delay(function(){c.classList.remove("a-button-disabled");c.classList.remove("a-button-focus")},Dd(b))},Dd=function(a){var b=Date.now();return 2E3<b-a?0:2E3-(b-a)},kb=function(a){(a=a.querySelector(".add-to-cart-button"))||Q["default"].error('Missing Add to Cart button!", "add-to-cart.dom-handler',"getAddToCartButton");return a},va=function(a,b,c){Array.isArray(a)?a.forEach(function(d){F.count(""+d+":"+b,c)}):F.count(""+a+":"+b,c)},hc=function(a,
b,c){b=Date.now()-b;va(a,"AddToCart:ClientLatency",b);va(a,"AddToCart:"+(c?"NeoAddToCart":"AddToCartApi")+":ClientLatency",b)},ca=function(a,b,c){va(b,"AddToCart:Availability:ALL",0);va(b,"AddToCart:Availability:Failure:"+a,1);c=c?"NeoAddToCart":"AddToCartApi";va(b,"AddToCart:"+c+":Availability:ALL",0);va(b,"AddToCart:"+c+":Availability:Failure:"+a,1)},ic=function(a,b){va(a,"AddToCart:Availability:ALL",1);va(a,"AddToCart:"+(b?"NeoAddToCart":"AddToCartApi")+":Availability:ALL",1)},jc=function(a){E["default"].trigger("add-to-cart-library:update-cart-count:trigger",
a)},Ed={boolean:Boolean,number:Number,string:String},Fd=function(a,b){void 0===b&&(b="");var c={};Object.keys(a).forEach(function(d){var e=d.split(b?b:/\]\[|\[|\]/).filter(function(h){return h});if(!(1>e.length)&&e.includes("additionalParameters")){""===b&&(e=e.slice(e.indexOf("additionalParameters")+1));var f=e.pop(),g=k.__read(a[d].split(","),2);d=g[1];g=Ed[g[0]];e.reduce(function(h,l){return h[l]=h[l]||{}},c)[f]=g(d)}});return Object.keys(c).length?c:void 0},Gd=function(a,b){return k.__awaiter(void 0,
void 0,void 0,function(){var c,d,e,f;return k.__generator(this,function(g){switch(g.label){case 0:return c={Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},d=v["default"].cardRoot.getElementsByClassName("shoppingPortalCSRFToken")[0].getElementsByTagName("input")[0],c["anti-csrftoken-a2z"]=d&&d.value?d.value:a["anti-csrftoken-a2z"],[4,fetch(b,{method:"post",headers:c,body:new URLSearchParams(a)})];case 1:return e=g.sent(),e.ok?[4,e.json()]:[3,3];case 2:return[2,g.sent()];
case 3:return[4,e.text()];case 4:throw f=g.sent(),Error(f);}})})},Hd=function(a,b){return k.__awaiter(void 0,void 0,void 0,function(){var c,d,e,f,g;return k.__generator(this,function(h){c=Fa(a.inputKeyValues,"clientName");d=Fa(a.inputKeyValues,"customizers");e=Fa(a.inputKeyValues,"anti-csrftoken-a2z");h=JSON;for(var l=h.stringify,n=a.inputKeyValues,m=a.numItems,q=[],u=0;u<m;u++){var p=Fa(n,"items["+u+".base][asin]"),x=Fd(n),z=x?void 0:Fa(n,"items["+u+".base][offerListingId]"),R=Fa(n,"items["+u+".base][quantity]"),
L=Number(R);if(isNaN(L))throw Error("Quantity passed "+R+" is not a number!");q.push({asin:p,offerListingId:z,quantity:L,additionalParameters:x})}f='{"items":'+l.call(h,q)+"}";g={clientName:c,customizers:d,"anti-csrftoken-a2z":e,payload:f};return[2,Gd(g,b)]})})},Fa=function(a,b){var c=a[b];if(!c)throw Error("Missing "+b+" in add to cart form values "+JSON.stringify(a)+"!");return c},lb=function(a,b,c,d){if(!b||!b[a])return Q["default"].error("Missing Html Container Selector for "+a+" in the experienceContainerSelector",
"post-neo-add-to-cart-handlers","experienceHandler");if(c=c.querySelector("."+b[a]))K["default"].show(c),d&&(c.innerHTML=d);else return Q["default"].error("Missing "+b[a]+" Container in the faceoutContainerSection","post-neo-add-to-cart-handlers","experienceHandler")},mb=function(a,b){for(var c in b){var d;(d=a.querySelector("."+b[c]))&&K["default"].hide(d)}},kc={SCXDiscovery_SpeedCardsLibrary:{MOBILE:{weblab:"DEX_SSD_AUI_ATC_BYG_M_1210471",treatment:"C"},DESKTOP:{weblab:"DEX_SSD_AUI_ATC_BYG_D_1210469",
treatment:"C"}}},Jd=function(a){var b=a.clientName;a=a["anti-csrftoken-a2z"];if(b&&a){var c=Lc["default"].isSupported("mobile")?"MOBILE":"DESKTOP";kc[b]&&(c=kc[b][c],aa["default"].rid&&c&&c.weblab&&c.treatment&&(b={ref_:"atc_clib",weblabId:c.weblab,weblabTreatment:c.treatment,requestID:aa["default"].rid,clientName:b},a={accepts:"text/html, application/json",additionalHeaders:{"anti-csrftoken-a2z":a},timeout:2E3},Ba["default"].post(Id("/cart/add-to-cart/weblab",b),a,b).then(function(){aa["default"].count("ATCLibExperimentTriggerSuccess",
1)}).catch(function(){aa["default"].count("ATCLibExperimentTriggerFailure",1)})))}},Id=function(a,b){return(b=Object.entries(b).filter(function(c){c=k.__read(c,2);c[0];return null!=c[1]}).map(function(c){c=k.__read(c,2);var d=c[1];return encodeURIComponent(c[0])+"="+encodeURIComponent(d)}).join("&"))?a+"?"+b:a},Kd=function(a,b){try{var c=a.closest(".mobile-promotion-nudges-card-container"),d=b.ProgressSection,e=b.DefaultProgressSection;P.when("cart-progress-module").execute(function(f){return k.__awaiter(this,
void 0,void 0,function(){return k.__generator(this,function(g){f.callUpdateCartProgress(d,e,a,c);return[2]})})})}catch(f){J["default"].log("Error occured while updating Cart Progress : "+f),aa["default"].count("ATCLibUpdateCartProgressFailureCount",1)}},Ld=ea["default"].setup(["addToCart"]),Nd=function(a){var b=Ja["default"].setup().define;b(a.featureId?"AddToCart:"+a.featureId:"AddToCart","click",function(c){var d;return Md(c,null!==(d=a.useNeoAddToCart)&&void 0!==d?d:!1,a.postAddToCartHandler,a.metricsPrefixes,
a.experienceContainerSelectors,a.faceoutContainerSelector)})},nb={success:!1},Md=function(a,b,c,d,e,f){return k.__awaiter(void 0,void 0,void 0,function(){var g,h,l,n,m,q,u,p,x,z,R,L,U,qa,G,M,S;return k.__generator(this,function(y){switch(y.label){case 0:if(!b&&!c)return[2,Q["default"].error("Missing Post Add To Cart Handlers!","add-to-cart.client","handleAddToCartBrowserOperation")];g=null===(qa=a.currentTarget)||void 0===qa?void 0:qa.closest(".add-to-cart-section");if(!g)return ca("MissingHtml",
d,b),[2,Q["default"].error("Missing AddToCart section near AddToCart button!","add-to-cart.client","handleAddToCartBrowserOperation")];Bd(g);if(kb(g).classList.contains("a-button-disabled"))return[2];kb(g).classList.add("a-button-disabled");y={};for(var V=fc(g).getElementsByTagName("input"),N=0;N<V.length;N++){var Y=V[N];y[Y.name]=Y.value}(V=Cd())&&(y["anti-csrftoken-a2z"]=V);h=y;y=a.currentTarget;(null===y||void 0===y?0:y.dataset)||Q["default"].error("Event target is missing required data","add-to-cart.client",
"getTargetElementDataFromMixEvent");l=null===y||void 0===y?void 0:y.dataset;n=l.reftag;m=l.asins;q=l.url;if(!m)return ca("MissingAsins",d,b),[2,Q["default"].error("Missing asins in target element data","add-to-cart.client","handleAddToCartBrowserOperation")];u=JSON.parse(m);if(b){if(f){if(p=null===(G=a.currentTarget)||void 0===G?void 0:G.closest("."+f),!p)return ca("MissingFaceoutContainerSection",d,b),[2,Q["default"].error("Missing FaceoutContainer Section near AddToCart button!","add-to-cart.client",
"handleAddToCartBrowserOperation")]}else return ca("MissingFaceoutContainerSelector",d,b),[2,Q["default"].error("Missing FaceoutContainerSelector","add-to-cart.client","handleAddToCartBrowserOperation")];if(!e)return ca("MissingExperienceContainerSelectors",d,b),[2,Q["default"].error("Missing experienceContainerSelectors","add-to-cart.client","handleAddToCartBrowserOperation")];if(e.ErrorMessage){if(R=p.querySelector("."+e.ErrorMessage),!R)return ca("MissingErrorMessageContainerSection",d,b),[2,Q["default"].error("Missing ErrorMessageContainer Section in FaceoutContainer Section",
"add-to-cart.client","handleAddToCartBrowserOperation")]}else return ca("MissingErrorMessageSelector",d,b),[2,Q["default"].error("Missing ErrorMessage Container in experienceContainerSelectors","add-to-cart.client","handleAddToCartBrowserOperation")];if(!q)return ca("MissingEndpoint",d,b),[2,Q["default"].error("Missing NeoAddToCart Endpoint in target element data","add-to-cart.client","handleAddToCartBrowserOperation")];x=g.querySelector(".inline-error-message");if(!x)return ca("MissingInlineErrorMessageContainerSection",
d,b),[2,Q["default"].error("Missing inlineErrorMessage Container Section in addToCartSection","add-to-cart.client","handleAddToCartBrowserOperation")];z=g.querySelector(".inline-success-message");if(!z)return ca("MissingInlineSuccessMessageContainerSection",d,b),[2,Q["default"].error("Missing inlineSuccessMessage Container Section in addToCartSection","add-to-cart.client","handleAddToCartBrowserOperation")]}if(!n)return b||(null===c||void 0===c?void 0:c.errorHandler(nb,u)),ca("MissingReftag",d,b),
[2,Q["default"].error("Missing reftag in target element data","add-to-cart.client","handleAddToCartBrowserOperation")];L=l.numitems;if(!L)return b||(null===c||void 0===c?void 0:c.errorHandler(nb,u)),ca("MissingNumItems",d,b),[2,Q["default"].error("Missing numItems in target element data","add-to-cart.client","handleAddToCartBrowserOperation")];U=Date.now();Od(g);return b?[4,Pd(h,L,q,d,e,p,null!==(M=null===x||void 0===x?void 0:x.innerHTML)&&void 0!==M?M:"",null!==(S=null===z||void 0===z?void 0:z.innerHTML)&&
void 0!==S?S:"",g,U)]:[3,2];case 1:return y.sent(),[3,4];case 2:return[4,Qd(h,n,L,d,c,u,g,U)];case 3:y.sent(),y.label=4;case 4:return[2]}})})},Od=function(a){(a=a.querySelector('input[name="spClickUrlATC"]'))&&a.value&&Ba["default"].get(a.value,{accepts:"text/html, application/json",timeout:2E3}).then(function(){aa["default"].count("ATCLibSponsoredProductsClicksATCUrlSuccess",1)}).catch(function(){aa["default"].count("ATCLibSponsoredProductsClicksATCUrlFailure",1)})},Rd=function(a,b,c){return k.__awaiter(void 0,
void 0,void 0,function(){var d,e;return k.__generator(this,function(f){d={inputKeyValues:a,numItems:c};e=Bb.addTracking(Ld.addToCart,{ref_:b});return[2,e(d)]})})},Pd=function(a,b,c,d,e,f,g,h,l,n){return k.__awaiter(void 0,void 0,void 0,function(){var m,q,u;return k.__generator(this,function(p){switch(p.label){case 0:m=Number(b),p.label=1;case 1:return p.trys.push([1,3,4,5]),[4,Hd({inputKeyValues:a,numItems:m},null!==c&&void 0!==c?c:"")];case 2:q=p.sent();q.successful?(ic(d,!0),q.count&&jc(q.count),
E["default"].trigger("add-to-cart-library:add-to-cart:success"),e&&e.ProgressSection&&e.DefaultProgressSection&&Kd(f,e)):ca("FailureResponse",d,!0);p=q.experience;var x=q.successful;mb(f,e);try{for(var z in p)lb(z,e,f,p[z])}catch(R){z=x?h:g,mb(f,e),lb("ErrorMessage",e,f,z)}return[3,5];case 3:return u=p.sent(),E["default"].trigger("add-to-cart-library:add-to-cart:error"),mb(f,e),lb("ErrorMessage",e,f,g),ca("Error",d,!0),Q["default"].error("callNeoAddToCart Error: "+u.message,"add-to-cart.client","handleAddToCartBrowserOperation"),
[3,5];case 4:return hc(d,n,!0),gc(l,n),[7];case 5:return[2]}})})},Qd=function(a,b,c,d,e,f,g,h){return k.__awaiter(void 0,void 0,void 0,function(){var l,n;return k.__generator(this,function(m){switch(m.label){case 0:return m.trys.push([0,2,3,4]),[4,Rd(a,b,Number(c))];case 1:return l=m.sent(),l.success?(ic(d,!1),l.count&&jc(l.count),null===e||void 0===e?void 0:e.successHandler(l,f)):(ca("FailureResponse",d,!1),null===e||void 0===e?void 0:e.errorHandler(l,f)),Jd(a),[3,4];case 2:return n=m.sent(),ca("Error",
d,!1),null===e||void 0===e?void 0:e.errorHandler(nb,f),Q["default"].error("callAddToCart Error: "+n.message,"add-to-cart.client","handleAddToCartBrowserOperation"),[3,4];case 3:return hc(d,h,!1),gc(g,h),[7];case 4:return[2]}})})},lc=function(a,b,c,d){E["default"].trigger("p13n:sc:cartupdated:"+a,b);d&&E["default"].trigger("add-to-cart-library:update-cart-count:trigger",c)},za;(function(a){a.removeItemFromCart="removeItemFromCart";a.addItemToCart="addItemToCart"})(za||(za={}));var Sd=yb.setup(["modifyItemsInCart"]),
Ka=Ga.setup(),Ud=function(a,b){if("true"!==a.dataset.initializedCartSubscriber)E["default"].on("p13n:sc:cartupdated:"+b,function(c){Td(a,c);a.dataset.initializedCartSubscriber="true"})},ob=function(a,b){a?b.classList.add("a-button-disabled"):b.classList.remove("a-button-disabled")},Oa=function(a,b,c){var d=a.querySelector(".asin-id-"+b+" .p13n-sc-atc-failure"),e=null===d||void 0===d?void 0:d.querySelector(".p13n-sc-atc-failure .a-declarative"),f=a.querySelector(".asin-id-"+b+" .p13n-sc-default-atc-error-container"),
g=function(n){var m;return f&&(null===(m=null===f||void 0===f?void 0:f.querySelector(n))||void 0===m?void 0:m.textContent)};b=null===d||void 0===d?void 0:d.querySelector(".p13n-sc-popover");c=c&&c.failureMessage;var h=g(".p13n-sc-default-atc-error"),l=g(".p13n-sc-default-atc-product-error");g=g(".p13n-sc-default-atc-error-url");g=h&&g&&l?h.replace("${dpUrl}","<a href="+g+">"+l+"</a>"):void 0;W(e)&&W(b)&&(c?e.dataset.aPopover='{"inlineContent":"'+c+'"}':g&&(e.dataset.aPopover='{"inlineContent":"'+
g+'"}'),K["default"].show(b),b.click());W(d)&&K["default"].show(d);Vd((null===a||void 0===a?0:a.classList.contains("p13n-sc-shoveler"))?a:null===a||void 0===a?void 0:a.querySelector(".p13n-sc-shoveler"))},Vd=function(a){W(a)&&Db["default"].getCarousel(a).init()},pb=function(a,b){a=a.querySelector(".asin-id-"+b+" .p13n-sc-atc-failure");W(a)&&K["default"].hide(a);a=null===a||void 0===a?void 0:a.querySelector(".p13n-sc-popover");W(a)&&K["default"].hide(a)},mc=function(a){return parseInt(W(a)&&a.getAttribute("data-maxorderquantity")||
"999",10)},Td=function(a,b){var c=a.querySelector(".p13n-sc-atc-stepper-section"),d=a.querySelector(".add-to-cart-section"),e=null===c||void 0===c?void 0:c.querySelector(".atc-stepper-quantity-display"),f=null===c||void 0===c?void 0:c.querySelector(".atc-stepper-trash-button"),g=null===c||void 0===c?void 0:c.querySelector(".atc-stepper-remove-button"),h=null===c||void 0===c?void 0:c.querySelector(".atc-stepper-add-button"),l=function(m){m?(K["default"].show(c),K["default"].hide(d)):(K["default"].hide(c),
K["default"].show(d))};a=function(m){W(f)&&W(g)&&(m?(K["default"].show(f),K["default"].hide(g)):(K["default"].hide(f),K["default"].show(g)))};var n=function(m){W(h)&&(m?h.classList.remove("p13n-atc-add-disabled"):h.classList.add("p13n-atc-add-disabled"))};0<b?(l(!0),W(e)&&(e.textContent=b.toString()),W(c)&&c.setAttribute("data-currentquantity",b.toString()),e=mc(c),a(1===b),n(b<e)):l(!1)},Wd=function(a,b,c){b={items:[{id:c,quantity:b}]};return Bb.addTracking(Sd.modifyItemsInCart,{ref_:a})(b)},nc=
function(a,b){return k.__awaiter(void 0,void 0,void 0,function(){var c,d,e,f,g,h,l,n,m,q,u;return k.__generator(this,function(p){switch(p.label){case 0:b.stopBubble();c=null===b||void 0===b?void 0:b.currentTarget;if(!c)return[2];d=c.parentElement;if(null===d||void 0===d||!d.classList.contains("p13n-sc-atc-stepper-section"))throw Error("DOM formatting incompatible with stepper");if(d.classList.contains("a-button-disabled"))return[2];e=c.dataset.id;f=d.dataset.modifyId;g=d.dataset.reftag;h=zd(d.dataset.currentquantity);
l=mc(d);if(!(e&&e.length&&h&&g&&f))throw Error("DOM formatting incompatible with stepper");n=h+a;if(n>l&&0<a)return[2];m=function(){d.parentElement&&Oa(d.parentElement,e)};q=function(){d.parentElement&&pb(d.parentElement,e)};ob(!0,d);p.label=1;case 1:return p.trys.push([1,3,,4]),[4,Wd(g,n,f).catch(function(){})];case 2:return u=p.sent(),ob(!1,d),u&&u.success||m(),u&&u.success&&void 0!==u.count?(q(),lc(e,n,u.count,!0)):u&&u.success&&void 0===u.count&&(F.count("p13n:sc:lib:undefinedcartquantity",(F.count("p13n:sc:lib:undefinedcartquantity")||
0)+1),q()),[3,4];case 3:return p.sent(),m(),ob(!1,d),[3,4];case 4:return[2]}})})},oc=function(a,b,c,d){Nd({postAddToCartHandler:{successHandler:function(e,f){c(f[0],a,e);pb(a,f[0])},errorHandler:function(e,f){d(f[0],a,e)}},metricsPrefixes:b})},Xd=function(a){a&&Ba["default"].get(a,{accepts:"text/html, application/json",timeout:2E3}).then(function(){aa["default"].count("P13NSCCardsSponsoredProductsClicksATCUrlSuccess",1)}).catch(function(){aa["default"].count("P13NSCCardsSponsoredProductsClicksATCUrlFailure",
1)})},qb=function(a){return 0===Math.floor(a/10)?"0"+a.toString():a.toString()},Yd=function(a){var b=Date.now();var c=a.dayscountdowntoendtemplate,d=a.expiredstring,e=a.hourscountdowntoendtemplate,f=a.minutescountdowntoendtemplate;a=parseInt(a.endtime,10);if(b<=a){d=null;var g=a-b;a=Math.floor(g/864E5);var h=Math.floor(g/36E5);b=Math.floor(g/6E4%60);g=Math.floor(g/1E3%60);if(1<a&&c&&(d=c,null!==d))return c=d.replace("${daysCount}",a.toString());f&&(d=0===h?f:e);return null!==d?(c=d.replace("_hours_",
qb(h)),c=c.replace("_minutes_",qb(b)),c=c.replace("_seconds_",qb(g))):""}return d},Zd=function(a){if(null!==a&&a.dataset.endtime){a.dataset.callbackAttached="true";var b=setInterval(function(){a.innerText===a.dataset.expiredstring&&clearInterval(b);var c=Yd({dayscountdowntoendtemplate:a.dataset.dayscountdowntoendtemplate||"",endtime:a.dataset.endtime||"",expiredstring:a.dataset.expiredstring||"",hourscountdowntoendtemplate:a.dataset.hourscountdowntoendtemplate||"",minutescountdowntoendtemplate:a.dataset.minutescountdowntoendtemplate||
""});a.innerText=c},1E3)}},$d=function(a){a=oa["default"].cardRoot.getElementsByClassName(a);return Array.prototype.slice.call(a)},be=function(a,b){$d("p13n-sc-unified-ad-label").forEach(function(c){c={adFeedbackLabelId:c.dataset.adFeedbackLabelId||"",adFeedbackAsin:c.dataset.adFeedbackAsin||"",adId:c.dataset.adId||"",campaignId:c.dataset.campaignId||"",advertiserId:c.dataset.advertiserId||"",marketplaceId:c.dataset.marketplaceId||"",isLocationUsed:c.dataset.locationUsed||"",isInterestBasedAdsOptOut:c.dataset.interestBased||
"",title:c.dataset.asinTitle||"",price:c.dataset.asinPrice||"",currencyCode:c.dataset.currencyCode||""};c.adFeedbackLabelId&&c.adFeedbackAsin&&c.adId&&c.campaignId&&c.advertiserId&&c.marketplaceId&&c.isLocationUsed&&c.isInterestBasedAdsOptOut&&ae(c,b,a)})},ae=function(a,b,c){var d="mobile"===b?pc(a.adFeedbackLabelId,qc(a,"mobile")):pc(a.adFeedbackLabelId,qc(a,"desktop"));c(function(){return d})},qc=function(a,b){var c=b=k.__assign,d=a.adFeedbackAsin,e=a.adId,f=a.campaignId,g=a.title;var h=a.price;
var l=a.currencyCode;h=h&&l?{amount:h,currencyCode:l}:void 0;l=a.advertiserId;var n=a.marketplaceId;c=c.call(k,{},{asin:d,adCreativeIndex:0,adId:e,campaignId:f,title:g,priceInfo:h,advertiserIdNS:l&&n?"axiom."+n+"."+l:void 0});d=a.isLocationUsed;a=a.isInterestBasedAdsOptOut;a=void 0===d||void 0===a?void 0:{version:1,context:!0,location:"true"===d,pastActivity:"true"===a?0:1};return{adCreativeDetails:[b.call(k,c,{selectionSignals:a})]}},pc=function(a,b){return{adFeedbackLabelId:a,adCreativeMetaData:b}},
rc=function(a,b){if(a&&"true"===a.toLowerCase())return 216;a=b.adCreativeMetaData.adCreativeDetails;return 2>(a?a.length:0)?467:340},Pa=function(a,b){return a.querySelector("[class*="+b+"]")},ce=function(a,b,c){a=JSON.parse(a);a.adCreativeMetaData=b.adCreativeMetaData;a.feedbackFormContainerId=c;return encodeURI(JSON.stringify(a))},de=function(a,b,c,d){return k.__awaiter(void 0,void 0,void 0,function(){var e,f,g,h,l,n;return k.__generator(this,function(m){e="adFeedbackBottomSheet_"+a;m=(null===(n=
Pa(b,"ad-feedback-bottom-sheet-container"))||void 0===n?void 0:n.className)||"";f="."+b.className+" ."+m.replace(" ",".");g=b.dataset.closeButtonAriaText;h={height:rc(d,c),closeType:"icon",closeMessage:g};try{return l=Ma["default"].create(e,f,h),[2,l]}catch(q){throw F.count("adfeedback:cards:clientMobile:bottomSheetCreation:failure",1),Error("BottomSheet Creation Failed : "+q);}})})},ee=function(a){a.on("afterHide",function(){return k.__awaiter(void 0,void 0,void 0,function(){return k.__generator(this,
function(b){switch(b.label){case 0:return[4,a.render(function(c){return k.__awaiter(void 0,void 0,void 0,function(){return k.__generator(this,function(d){for(;c.firstChild;)c.removeChild(c.firstChild);return[2]})})})];case 1:return b.sent(),[2]}})})})},he=function(a,b,c,d,e,f,g){var h="rtl"===document.getElementsByTagName("html")[0].dir?"ad-feedback-loading-spinnner-rtl":"ad-feedback-loading-spinnner";var l=Pa(oa["default"].cardRoot,h);a.on("beforeShow",function(){return k.__awaiter(void 0,void 0,
void 0,function(){var n,m,q;return k.__generator(this,function(u){switch(u.label){case 0:return n=d(),m=rc(g,n),[4,a.changeHeight(m)];case 1:return u.sent(),[4,a.render(function(p){return k.__awaiter(void 0,void 0,void 0,function(){return k.__generator(this,function(x){for(;p.firstChild;)p.removeChild(p.firstChild);return[2]})})})];case 2:return u.sent(),q=fe(b,c,d),[4,a.render(function(p){var x="160px",z=d().adCreativeMetaData.adCreativeDetails;z&&2>z.length&&(x="210px");g&&"true"===g.toLowerCase()&&
(x="90px");l.style.marginTop=x;p.innerHTML="";x=oa["default"].createElement("div");ge(l,x,e,q,f);p.appendChild(x)})];case 3:return u.sent(),[2]}})})})},fe=function(a,b,c){c=c();var d=c.adCreativeMetaData.adCreativeDetails;null===d||void 0===d?void 0:d.sort(function(e,f){return e.adCreativeIndex<f.adCreativeIndex?-1:1});return ce(b,c,a)},ge=function(a,b,c,d,e){b.appendChild(a);"function"==typeof F.uet&&F.uet("bb","adfeedback:cards:clientMobile:fetchFormContent:time",{wb:1});Ba["default"].post("/af/multi-creative/feedback-form",
{accepts:"application/json",contentType:"application/json",additionalHeaders:{"Accept-Language":""===c?"en-US":c}},{pl:d,deviceType:"mobile"}).then(function(f){return k.__awaiter(void 0,void 0,void 0,function(){var g,h,l;return k.__generator(this,function(n){"function"==typeof F.uet&&F.uet("be","adfeedback:cards:clientMobile:fetchFormContent:time",{wb:1});F.count("adfeedback:cards:clientMobile:fetchFormContent:success",1);g=oa["default"].createElement("div");g.innerHTML=String(f.responseBody);for(h=
0;h<g.children.length;++h)l=g.children[h],"SCRIPT"===l.tagName?rb("script",l,b):"LINK"===l.tagName?rb("link",l,b):rb("div",l,b);b.removeChild(a);return[2]})})}).catch(function(){"function"==typeof F.uet&&F.uet("be","adfeedback:cards:clientMobile:fetchFormContent:time",{wb:1});F.count("adfeedback:cards:clientMobile:fetchFormContent:failure",1);b.innerHTML=e});"function"==typeof F.uex&&F.uex("ld","adfeedback:cards:clientMobile:fetchFormContent:time",{wb:1})},rb=function(a,b,c){var d=oa["default"].createElement(a);
d.innerHTML=b.innerHTML;b.getAttributeNames().forEach(function(e){d.setAttribute(e,b.getAttribute(e)||"")});c.appendChild(d)},sc={},ie=function(a,b){return k.__awaiter(void 0,void 0,void 0,function(){var c,d,e,f,g,h,l,n,m,q;return k.__generator(this,function(u){c=Pa(a,"ad-feedback-primary-link");d=b();e=d.adFeedbackLabelId;f=Ja["default"].setup();g="show-sheet"+e;h=d.adCreativeMetaData.adCreativeDetails;l=a.dataset;n=l.isDsaEnabled;m=l.weblabTreatment;q=n;"undefined"===q&&(q=h&&0<h.length?h[0].selectionSignals?
"true":"false":"false");"true"===q&&"T1"!==m&&(q="false");f.attach(g,c);f.define(g,"click",function(){return k.__awaiter(void 0,void 0,void 0,function(){var p;return k.__generator(this,function(x){switch(x.label){case 0:return(p=sc[e])?[3,2]:[4,de(e,a,d,q)];case 1:var z=p=x.sent(),R=q,L=Pa(a,"ad-feedback-bottom-sheet-container"),U=a.dataset;he(z,L?L.id:"",U.adFeedbackPayload,b,U.currentLocale,U.formLoadErrorText,R);ee(z);sc[e]=p;x.label=2;case 2:return p.show(),[2]}})})});try{c.addEventListener("keydown",
function(p){if(" "===p.key||"Enter"===p.key)p.preventDefault(),c.click()})}catch(p){console.log("Couldnt add keydown event listner")}return[2]})})},sb=function(a){return k.__awaiter(void 0,void 0,void 0,function(){var b,c,d,e;return k.__generator(this,function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),b=a().adFeedbackLabelId,c=v["default"].cardRoot.getElementsByClassName("adFeedbackMainComponent_"+b)[0],d=c.dataset.isSponsoredLabelActive,"false"===(d||"false").toLowerCase()?[2]:[4,ie(c,
a)];case 1:return f.sent(),[3,3];case 2:throw e=f.sent(),F.count("adfeedback:cards:clientMobile:enableAdFeedback:failure",1),Error("Failed to call enableAdFeedback for mobile client: "+e);case 3:return[2]}})})},Qa=function(a){a&&K["default"].hide(a)},tb=function(a,b){return a.find?a.find(b):a.filter(b)[0]},tc={initCarousel:function(a){return k.__awaiter(void 0,void 0,void 0,function(){var b,c,d,e,f;return k.__generator(this,function(g){b=a||{};c=b.afterPageLoaded;d=b.afterDeliveryMessageLoaded;e=
v["default"].cardRoot.classList.contains("p13n-sc-shoveler")?[v["default"].cardRoot]:Array.prototype.slice.call(v["default"].cardRoot.getElementsByClassName("p13n-sc-shoveler"));f=ea["default"].setup(["getCarouselItems"]);if(null===e||void 0===e||!e.length)return[2];e.forEach(function(h){return k.__awaiter(void 0,void 0,void 0,function(){var l,n,m,q,u,p;return k.__generator(this,function(x){switch(x.label){case 0:l=h.dataset||{};n="true"===l.showlazyloaddeliverymessage;m=function(){E["default"].loadDynamicImage("[data-name]='"+
p+"' .p13n-sc-dynamic-image");xd(h);vd(h);null===c||void 0===c?void 0:c(h);kd();yd(h);n&&ud(h).then(function(){return null===d||void 0===d?void 0:d(h)})};m();if(h.classList.contains("p13n-carousel-initialized"))return[2];h.classList.add("p13n-carousel-initialized");q=Db["default"].getCarousel(Ab.unscope(h));u=Kc["default"].getCarousel(h);p=q.getAttr("name");return[4,Promise.all([u.initialized,rd.setupModal(h)])];case 1:return x.sent(),E["default"].on("a:carousel:"+p+":change:pageSize",m),E["default"].on("a:carousel:"+
p+":change:loading",m),E["default"].on("a:carousel:"+p+":change:animating",m),E["default"].on("a:carousel:"+p+":change:fetchedItems",m),u.attachRemoteOperation(function(z){var R=z.indexes;z=z.ids;var L=f,U=L.getCarouselItems,qa=k.__assign,G=k.__assign({},l),M=String(R[0]||0);var S=R[0]||0,y,V,N=0,Y=l.aCarouselOptions?l.aCarouselOptions:void 0;if(Y&&(Y=JSON.parse(Y),Y=null===(y=null===Y||void 0===Y?void 0:Y.ajax)||void 0===y?void 0:y.id_list))for(y=0;y<S&&y<Y.length;y++){var ba=JSON.parse(Y[y]);"true"===
((null===(V=null===ba||void 0===ba?void 0:ba.metadataMap)||void 0===V?0:V.isSponsoredProduct)?ba.metadataMap.isSponsoredProduct:"false")&&(N+=1)}return U.call(L,qa.call(k,G,{ids:z,indexes:R,offset:M,adOffset:N}))}),[2]}})})});return[2]})})}},je={initRefinements:function(a){return k.__awaiter(void 0,void 0,void 0,function(){var b,c,d,e,f,g,h,l,n,m,q,u,p,x,z,R,L,U;return k.__generator(this,function(qa){b=a.getFilteredItems;c=a.refresh;d="00000000-0000-0000-0000-000000000000";e=0;f={NOT_FILTERING_ID:!0};
h=null!==(U=null===(L=v["default"].cardRoot.querySelector(".p13n-sc-refinements"))||void 0===L?void 0:L.dataset)&&void 0!==U?U:{};l=h.cardinput?JSON.parse(h.cardinput):void 0;n=v["default"].cardRoot.querySelector(".filterable-widget");m=null===n||void 0===n?void 0:n.querySelector(".spinner-container");q=null===n||void 0===n?void 0:n.querySelector(".p13n-sc-pills-error");u=Array.prototype.slice.call(v["default"].cardRoot.querySelectorAll(".p13n-sc-refinement-pill"));p=tb(u,function(G){return"00000000-0000-0000-0000-000000000000"===
G.getAttribute("data-id")});x=Array.prototype.slice.call(v["default"].cardRoot.querySelectorAll("[data-category-type]"));z=Array.prototype.slice.call(v["default"].cardRoot.querySelectorAll("[data-modal-type]"));x.forEach(function(G){G.addEventListener("click",function(){var M=tb(z,function(S){return S.dataset.modalType===G.dataset.categoryType});M&&(g===M?(null===M||void 0===M?void 0:M.classList.add("aok-hidden"),g=void 0):(null===g||void 0===g?void 0:g.classList.add("aok-hidden"),M.classList.remove("aok-hidden"),
g=M))})});R=function(){return k.__awaiter(void 0,void 0,void 0,function(){var G,M,S,y,V,N;return k.__generator(this,function(Y){switch(Y.label){case 0:G=null===l||void 0===l?void 0:l.recommendations.filter(function(ba){var C;if("00000000-0000-0000-0000-000000000000"===d)return!0;var xa=(null===(C=ba.metadataMap)||void 0===C?0:C.refinements)?JSON.parse(ba.metadataMap.refinements):[];return tb(xa,function(Sa){return Sa===d})});f[d]||aa["default"].count("P13N:SC:FilteredAsinsCount:"+(G||[]).length,1);
aa["default"].count("P13N:SC:TotalRefinementClicks",1);f[d]=!0;M=k.__assign(k.__assign({},l),{recommendations:G,reftag:((null===l||void 0===l?void 0:l.reftag)||"")+("_f_"+d)});S=e+=1;y=v["default"].cardRoot.querySelector(".p13n-sc-refined-response[data-refined='"+d+"']");V=n.offsetHeight+"px";N=v["default"].cardRoot.querySelectorAll(".p13n-sc-refined-response");N.forEach(function(ba){return K["default"].hide(ba)});Qa(q);if(!y)return[3,2];Qa(m);K["default"].show(y);return[4,c(y)];case 1:return[2,Y.sent()];
case 2:return m&&(m.style.minHeight=V),m&&K["default"].show(m),[2,b(M).then(function(ba){return k.__awaiter(void 0,void 0,void 0,function(){var C;return k.__generator(this,function(xa){switch(xa.label){case 0:if(!((null===n||void 0===n?0:n.innerHTML)&&e===S&&ba.parentElement))return[3,2];Qa(m);C=document.createElement("div");C.setAttribute("data-refined",d);C.classList.add("p13n-sc-refined-response");C.innerHTML=ba.parentElement.innerHTML;n.append(C);return[4,c(n)];case 1:xa.sent(),xa.label=2;case 2:return[2]}})})}).catch(function(){q&&
K["default"].show(q);aa["default"].count("P13N:SC:GetFilteredItemsCallFailed",1)}).finally(function(){Qa(m)})]}})})};u.forEach(function(G){return G.addEventListener("click",function(){return k.__awaiter(void 0,void 0,void 0,function(){var M;return k.__generator(this,function(S){switch(S.label){case 0:return M=G.getAttribute("data-id")||"00000000-0000-0000-0000-000000000000",v["default"].cardRoot.querySelectorAll(".p13n-selected-pill").forEach(function(y){y.classList.remove("p13n-selected-pill")}),
M===d?(d="00000000-0000-0000-0000-000000000000",null===p||void 0===p?void 0:p.classList.add("p13n-selected-pill")):(G.classList.add("p13n-selected-pill"),d=M,aa["default"].count("P13N:SC:Refinement:"+d,1)),[4,R()];case 1:return S.sent(),[2]}})})})});return[2]})})}},ke={updateHandler:function(a){var b;void 0===a&&(a=v["default"].cardRoot);a=Array.prototype.slice.call(a.querySelectorAll('[class*="dealsCardDealTimer"]:not([data-callback-attached])'));try{for(var c=k.__values(a),d=c.next();!d.done;d=
c.next())Zd(d.value)}catch(f){var e={error:f}}finally{try{d&&!d.done&&(b=c.return)&&b.call(c)}finally{if(e)throw e.error;}}}},le={climatePledgeFriendlyBottomSheet:function(a){var b=Ja["default"].setup().define,c=!1,d,e;b("p13n-cpf-bottom-sheet-click","click",function(f){var g;if(!c){var h=document.createElement("div"),l=a+"-empty-div";h.classList.add(l,"aok-hidden");v["default"].cardRoot.appendChild(h);e=Ma["default"].create(a,"."+l);e.on("afterShow",function(){d&&e.changeHeight(d.scrollHeight+15)});
c=!0}f=null===(g=null===f||void 0===f?void 0:f.currentTarget)||void 0===g?void 0:g.getAttribute("cpf-sheet-content-id");var n=v["default"].cardRoot.querySelector("#"+f);e.render(function(m){var q;m.innerHTML=(null===n||void 0===n?void 0:n.outerHTML)||"";null===(q=m.querySelector(".p13n-sc-cpf-bottom-sheet-content"))||void 0===q?void 0:q.classList.remove("aok-hidden");d=m});e.show()})}},me={initializeInPageBadgeAtcOperations:oc,initializeQuantityStepperAtcFlavoredOperations:function(a,b,c,d){var e=
Array.prototype.slice.call(a.querySelectorAll(".p13n-sc-uncoverable-faceout"));Ka.define(za.removeItemFromCart,["click"],nc.bind(null,-1));Ka.define(za.addItemToCart,["click"],nc.bind(null,1));e.forEach(function(f){var g=f.id;f=f.querySelector(".p13n-sc-atc-container");if(W(f)){Ud(f,g);g=null===f||void 0===f?void 0:f.querySelector(".atc-stepper-trash-button");var h=null===f||void 0===f?void 0:f.querySelector(".atc-stepper-remove-button");f=null===f||void 0===f?void 0:f.querySelector(".atc-stepper-add-button");
W(g)&&Ka.attach(za.removeItemFromCart,g);W(h)&&Ka.attach(za.removeItemFromCart,h);W(f)&&Ka.attach(za.addItemToCart,f)}});return oc(a,b,function(f,g,h){var l;if(h.success&&(null===(l=null===h||void 0===h?void 0:h.items)||void 0===l?0:l.length)){l=h.items[0];var n;if(n=l.id){var m=a.querySelector("#atc-stepper-section-"+f);W(m)?(m.dataset.modifyId=n,n=!0):n=!1}else n=!1;n&&h.count&&void 0!==l.quantity?lc(f,l.quantity,h.count,!1):(Oa(g,f,h),d&&d(f,g,h));c&&(pb(g,f),c(f,g,h))}else Oa(g,f,h),d&&d(f,g,
h)},function(f,g,h){Oa(g,f,h);d&&d(f,g,h)})},setupSponsoredProductATCListeners:function(a){a.querySelectorAll(".p13n-sc-atc-container").forEach(function(b){if("true"===b.dataset.hasSponsoredUrl){var c=b.dataset.sponsoredAtcUrl;if(c){var d=b.querySelector("form.add-to-cart-data");d&&d.querySelector('input[type="submit"][name="submit.addToCart"]')&&(b.onclick=function(e){e.preventDefault();Xd(c);d.submit()})}}})}},ne={enableMobileUnifiedAdLabels:function(){be(sb,"mobile")}},oe={enableAdFeedback:function(a){var b=
v["default"].cardRoot.querySelector("[data-sponsoredhybridwidgetcontext]");b&&(b=b.getAttribute("data-sponsoredhybridwidgetcontext"))&&a(b).catch(function(c){return J["default"].log("enableAdFeedbackDelegate: Error occurred: "+(c instanceof Error?c.message:JSON.stringify(c)))})}},pe={initializeQuantitySelectorWidgets:function(){E["default"].trigger("quantity-selector-widget:loadStatesAndInitialize")}},uc={updateTurbo:function(){E["default"].trigger("a:pageUpdate")},initializeBuyNowButtonEventHandlers:function(){var a=
Ga.setup().define;a("buy-now-button-click-handler","click",function(){F.count("p13n:sc:lib:buynowbutton:clicked",1)})}},qe={initializeInlineMessageResizeHandler:function(){E["default"].on("ax:atd:inlineMessage:updated",function(a){a=v["default"].cardRoot.classList.contains("p13n-sc-shoveler")?[v["default"].cardRoot]:Array.prototype.slice.call(v["default"].cardRoot.getElementsByClassName("p13n-sc-shoveler"));null!==a&&void 0!==a&&a.length&&a.forEach(function(b){W(b)&&Ad(b)})})}},se=function(a){return k.__awaiter(void 0,
void 0,void 0,function(){var b,c,d,e,f,g,h,l,n,m,q,u,p;return k.__generator(this,function(x){switch(x.label){case 0:b=null!==(m=a.widgetLabelClass)&&void 0!==m?m:"hybrid-widget-sponsored-label";c=null!==(q=a.productLabelClass)&&void 0!==q?q:"hybrid-sponsored-label";d=JSON.parse(a.sponsoredHybridWidgetContextJson);e=null!==(u=d.painterId)&&void 0!==u?u:"unknown";f=null!==(p=d.slotId)&&void 0!==p?p:"unknown";Da["default"].count("".concat(e,".").concat(f,".initAdFeedback"),1);if(g=re(b,c,a.enableWidgetAdFeedback,
e,f))return[2,g];h=0;l=vc(c);n=l.map(function(z){z=ub(z);if(z.adFeedbackLabelId&&z.adFeedbackAsin&&z.adId&&z.campaignId&&z.advertiserId&&z.marketplaceId&&z.isLocationUsed&&z.isInterestBasedAdsOptOut)return a.enableProductAdFeedback(z);h++;return Promise.resolve()});Da["default"].count("".concat(e,".").concat(f,".productAdFeedback"),l.length);Da["default"].count("".concat(e,".").concat(f,".invalidProductAdFeedbackPayload"),h);return[4,Promise.all(n)];case 1:return x.sent(),[2]}})})},re=function(a,
b,c,d,e){void 0===a&&(a="hybrid-widget-sponsored-label");void 0===b&&(b="hybrid-sponsored-label");a=vc(a);Da["default"].count("".concat(d,".").concat(e,".widgetAdFeedbackLabel"),a.length);if(1<a.length)throw Error("More than one ad feedback label found for widget");if(1===a.length){a=ub(a[0]);if(!a.adFeedbackLabelId)throw Da["default"].count("".concat(d,".").concat(e,".missingWidgetAdFeedbackLabel"),1),Error("Missing required attribute adFeedbackLabelId");b=oa["default"].cardRoot.querySelectorAll("[class*='".concat(b,
"']"));var f=[];b.forEach(function(g){g=ub(g);f.push(g)});Da["default"].count("".concat(d,".").concat(e,".widgetAdFeedback"),b.length);return c(a.adFeedbackLabelId,f)}},ub=function(a){return{adFeedbackLabelId:a.dataset.adFeedbackLabelId||"",adFeedbackAsin:a.dataset.adFeedbackAsin||"",adId:a.dataset.adId||"",campaignId:a.dataset.campaignId||"",advertiserId:a.dataset.advertiserId||"",marketplaceId:a.dataset.marketplaceId||"",isLocationUsed:a.dataset.locationUsed||"",isInterestBasedAdsOptOut:a.dataset.interestBasedAdsOptOut||
"",title:a.dataset.asinTitle||"",price:a.dataset.asinPrice||"",currencyCode:a.dataset.currencyCode||"",adProgram:a.dataset.adProgram||"",adCreativeId:a.dataset.adCreativeId||"",adNetwork:a.dataset.adNetwork||"",advertiserIdNS:a.dataset.advertiserIdNs||"",campaignIdNS:a.dataset.campaignIdNs||"",selectionSignals:a.dataset.selectionSignals||""}},vc=function(a){a=oa["default"].cardRoot.getElementsByClassName(a);return Array.prototype.slice.call(a)},wc=function(a,b){if(a&&b)return{amount:a,currencyCode:b}},
xc=function(a){if("1024"===(a.adProgram||"1024")){var b=k.__assign,c=k.__assign,d=a.adFeedbackAsin,e=a.adId,f=a.campaignId,g=a.title,h=wc(a.price,a.currencyCode);var l=a.advertiserId,n=a.marketplaceId;c=c.call(k,{},{asin:d,adCreativeIndex:0,adId:e,campaignId:f,title:g,priceInfo:h,advertiserIdNS:l&&n?"axiom."+n+"."+l:void 0});d=a.isLocationUsed;e=a.isInterestBasedAdsOptOut;var m;a=void 0===d||void 0===e?void 0:(m={version:1,context:!0},m.location="true"===d,m.pastActivity="true"===e?0:1,m);return b.call(k,
c,{selectionSignals:a})}return{asin:a.adFeedbackAsin,adCreativeIndex:0,adId:a.adId,campaignId:a.campaignId,adCreativeId:a.adCreativeId,adNetwork:a.adNetwork,title:a.title,priceInfo:wc(a.price,a.currencyCode),advertiserIdNS:a.advertiserIdNS,campaignIdNS:a.campaignIdNS,selectionSignals:JSON.parse(a.selectionSignals||"{}")}},ve=function(a){return k.__awaiter(void 0,void 0,void 0,function(){return k.__generator(this,function(b){return[2,se({widgetLabelClass:"hybrid-widget-sponsored-label",enableWidgetAdFeedback:te,
productLabelClass:"hybrid-sponsored-label",enableProductAdFeedback:ue,sponsoredHybridWidgetContextJson:a})]})})},te=function(a,b){b=b.map(xc);var c={adFeedbackLabelId:a,adCreativeMetaData:{adCreativeDetails:b}};return sb(function(){return c})},ue=function(a){var b=[xc(a)],c={adFeedbackLabelId:a.adFeedbackLabelId,adCreativeMetaData:{adCreativeDetails:b}};return sb(function(){return c})},vb;(vb||(vb={})).onClick="p13n-preference-pill-button-onclick";var wa=function(a,b){a&&(b?Ha.show(a):Ha.hide(a))},
we=function(a){return function(b){return k.__awaiter(void 0,void 0,void 0,function(){var c,d,e,f,g;return k.__generator(this,function(h){switch(h.label){case 0:c=b.currentTarget;if(!(c&&c instanceof HTMLElement)||c.dataset.disabled)return[2];c.dataset.disabled="true";d="true"===c.dataset.selected;e=!d;wb(c,"loading");return[4,null===a||void 0===a?void 0:a(e,c)];case 1:return(f=null!==(g=h.sent())&&void 0!==g?g:!0)?wb(c,e?"enabled":"disabled"):wb(c,d?"enabled":"disabled"),delete c.dataset.disabled,
[2]}})})}},wb=function(a,b){var c=a.querySelector(".checkmark-icon"),d=a.querySelector(".add-icon"),e=a.querySelector(".spinner");wa(c,!1);wa(d,!1);wa(e,!1);switch(b){case "disabled":wa(d,!0);a.dataset.selected="false";break;case "enabled":wa(c,!0);a.dataset.selected="true";break;case "loading":wa(e,!0)}},Aa={preferenceConfirmed:"p13n_profiles_ippb_preference-confirmed",preferenceRemoved:"p13n_profiles_ippb_preference-removed",profileHubClicks:"p13n_profiles_ippb_profile-hub-clicks",confirmedStateDisplayed:"p13n_profiles_ippb_confirmed-state-displayed",
inViewport:"p13n_profiles_ippb_in-viewport"},Ia=function(a){return F.count(a,(F.count(a)||0)+1)},xe=function(a,b){a.forEach(function(c){if(c.isIntersecting){var d=Aa.inViewport;b.unobserve(c.target);Ia(d)}})},ye=Ha.debounce(Cb,50),La={statusElement:function(a){return".pill-button-status-"+a},errorElement:function(a){return".pill-button-error-"+a},managePreferencesLink:".ippb-show-manage-preferences",rootElement:".p13n-profiles-ippb"},Be=function(){if(v["default"].cardRoot.querySelector(La.rootElement)){var a=
ea["default"].setup(["recordPreference"]);a=ze(a);Ga.setup().define(vb.onClick,"click",we(a));(a=v["default"].cardRoot.querySelector(La.managePreferencesLink))&&a.addEventListener("click",Ae);IntersectionObserver&&IntersectionObserverEntry?(addEventListener("scroll",ye,{passive:!0}),dispatchEvent(new Event("scroll"))):(new IntersectionObserver(xe)).observe(oa["default"].cardRoot);a=Aa.confirmedStateDisplayed;var b=v["default"].cardRoot.querySelector(La.rootElement);b&&"true"===b.dataset.preferenceConfirmed&&
Ia(a)}},ze=function(a){return function(b,c){return k.__awaiter(void 0,void 0,void 0,function(){var d,e,f,g,h,l,n,m,q,u;return k.__generator(this,function(p){switch(p.label){case 0:d=c.dataset.preference;e=c.dataset.preferenceAttribute;f=c.dataset.uniqueId;if(!d||!e||!f)return[2,!1];g=v["default"].cardRoot.querySelector(La.errorElement(f));wa(g,!1);p.label=1;case 1:return p.trys.push([1,3,,4]),[4,a.recordPreference({confirmed:b,preference:d,attribute:e})];case 2:p.sent();h=b?Aa.preferenceConfirmed:
Aa.preferenceRemoved;Ia(h);if(l=v["default"].cardRoot.querySelector(La.statusElement(f)))n=null!==(q=l.dataset.successAdd)&&void 0!==q?q:"",m=null!==(u=l.dataset.successRemove)&&void 0!==u?u:"",l.innerText=b?n:m;return[3,4];case 3:return p.sent(),wa(g,!0),[2,!1];case 4:return[2,!0]}})})}},Ae=function(){Ia(Aa.profileHubClicks)},Ce=function(a){var b=Array.from(a.querySelectorAll('[id*="buy-now-wrapper"]')),c=Jc(a,"p13n-sc-sunk-container","atd-context-wrapper");c=b.concat(c);if(0==c.length)return null;
var d=a.getElementsByClassName("a-carousel-card"),e=a.getElementsByClassName("p13n-sc-uncoverable-faceout"),f=Array.prototype.slice.call(e).map(function(h){var l=h.childElementCount;if(0<l){var n=h.getBoundingClientRect().top;l=h.children[l-1].getBoundingClientRect().bottom;return Math.max(l-n,h.clientHeight)}return h.clientHeight});f=Math.max.apply(Math,k.__spread(f));if(0<f){var g=f.toString()+"px";a.getElementsByClassName("a-carousel-viewport")[0].style.height=g;Array.prototype.slice.call(d).forEach(function(h){h.style.height=
g;Array.prototype.slice.call(h.children).forEach(function(l){l.style.height="100%"})});b.forEach(function(h){if(h=h.querySelector("form"))h.style.marginBottom="0px"});Array.prototype.slice.call(e).forEach(function(h){h.style.height="100%"})}Array.prototype.slice.call(c).forEach(function(h){if("true"!==h.dataset.expanderAdded){var l=v["default"].createElement("div");l.classList.add("_cDEzb_p13nScExpander_okgyR");var n=h.closest("[class*=p13n-sc-uncoverable-faceout]"),m=null===n||void 0===n?void 0:
n.lastElementChild;n&&m&&(n.insertBefore(l,m),h.dataset.expanderAdded="true")}})},yc=function(){return k.__awaiter(void 0,void 0,void 0,function(){var a,b,c,d,e,f;return k.__generator(this,function(g){switch(g.label){case 0:return a=ea["default"].setup(["getFilteredItemsGrid","getFilteredItemsCarousel","getBottomSheetASIN"]),b=function(){ke.updateHandler();pe.initializeQuantitySelectorWidgets();"true"===zb.cardRoot().dataset.useSponsoredAdsCardsLibrary?(oe.enableAdFeedback(ve),me.setupSponsoredProductATCListeners(v["default"].cardRoot)):
ne.enableMobileUnifiedAdLabels();uc.updateTurbo();"true"===v["default"].cardRoot.dataset.alignButtons&&Ce(v["default"].cardRoot);qe.initializeInlineMessageResizeHandler()},c=je.initRefinements({getFilteredItems:a.getFilteredItemsCarousel,refresh:function(){return tc.initCarousel({afterPageLoaded:b})}}),d=tc.initCarousel({afterPageLoaded:b}),le.climatePledgeFriendlyBottomSheet("p13n-mobile-carousel-cpf-bottom-sheet"),Qc("cpf-asin-shoveler-bottom-sheet"),uc.initializeBuyNowButtonEventHandlers(),e=hd.universalFeedbackBottomSheetInit(yc,
1),f=[c,d,e],Be(),[4,Promise.all(f)];case 1:return g.sent(),[2]}})})};xb._operationNames="getCarouselItems getFilteredItemsCarousel getCanariesFeedbackModalItems refreshCard getCanariesFeedbackReasons getBottomSheetContent deleteNotInterested recordNotInterested getUniversalFeedbackItem getUniversalFeedbackReasons getUniversalFeedbackBottomSheetContent getUniversalFeedbackActions updateList recordPreference".split(" ");xb.card=yc});
